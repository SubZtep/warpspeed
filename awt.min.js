class I{constructor(I,g,s){this.x=I,this.y=g,this.z=s,this.size=.5+Math.random()}}const g=()=>1e3*(Math.random()-.5);class s{config={};stars=[];constructor(I){this.canvas=I,this.ctx=this.canvas.getContext("2d")}update(s){for(const[c,C]of Object.entries(s))if(this.config[c]!==C){switch(c){case"resolution":(s.starScale||this.config.starScale)&&(this.size=C/(10/(s.starScale||this.config.starScale)),this.maxLineWidth=this.size/30);break;case"starScale":(s.resolution||this.config.resolution)&&(this.size=(s.resolution||this.config.resolution)/(10/C),this.maxLineWidth=this.size/30);break;case"density":const c=Math.ceil(1e3*C),B=c-this.stars.length;if(B>0)for(let s=0;s<B;s++){const s=new I(g(),g(),1e3*Math.random());this.stars.push(s)}else this.stars.length=c;break;case"starColor":const F="#"===(U=C).charAt(0)&&7===U.length?{r:parseInt(U.substr(1,2),16),g:parseInt(U.substr(3,2),16),b:parseInt(U.substr(5,2),16)}:{r:255,g:255,b:255};this.starR=F.r,this.starG=F.g,this.starB=F.b}this.config[c]=C}var U}draw(I){this.move(I);const g=this.config.resolution,s=this.config.resolution;this.size=Math.max(g,s)/(10/this.config.starScale);const U=this.ctx;U.fillStyle=this.config.backgroundColor,U.fillRect(0,0,g,s);for(const I of this.stars){const c=I.x/I.z,C=I.y/I.z;if(!this.config.warpEffect&&(c<-.5||c>.5||C<-.5||C>.5))continue;const B=I.size*this.size/I.z;if(!(B<.3)){if(this.config.depthAlpha){const g=(1e3-I.z)/1e3;U.fillStyle=`rgba(${this.starR}, ${this.starG}, ${this.starB}, ${g.toString()})`}else U.fillStyle=this.config.starColor;if(this.config.warpEffect){U.beginPath();const F=I.x/(I.z+this.config.warpEffectLength*this.config.speed),Q=I.y/(I.z+this.config.warpEffectLength*this.config.speed);if(F<-.5||F>.5||Q<-.5||Q>.5)continue;U.moveTo(g*(c+.5)-B/2,s*(C+.5)-B/2),U.lineTo(g*(F+.5)-B/2,s*(Q+.5)-B/2),U.lineWidth=Math.min(B,this.maxLineWidth),U.lineCap=this.config.useCircles?"round":"butt",U.strokeStyle=U.fillStyle,U.stroke()}else this.config.useCircles?(U.beginPath(),U.arc(g*(c+.5)-B/2,s*(C+.5)-B/2,B/2,0,2*Math.PI),U.fill()):U.fillRect(g*(c+.5)-B/2,s*(C+.5)-B/2,B,B)}}}move(I){console.log(this.config.speed);const g=this.config.speed*(I/10);for(const I of this.stars)for(I.z-=g;I.z<1;)I.z+=1e3,I.x=(Math.random()-.5)*I.z,I.y=(Math.random()-.5)*I.z}}function U(I,g,s){var U=void 0===g?null:g,c=function(I,g){var s=atob(I);if(g){for(var U=new Uint8Array(s.length),c=0,C=s.length;c<C;++c)U[c]=s.charCodeAt(c);return String.fromCharCode.apply(null,new Uint16Array(U.buffer))}return s}(I,void 0!==s&&s),C=c.indexOf("\n",10)+1,B=c.substring(C)+(U?"//# sourceMappingURL="+U:""),F=new Blob([B],{type:"application/javascript"});return URL.createObjectURL(F)}var c,C,B,F,Q=(c="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Y2xhc3MgdHtjb25zdHJ1Y3Rvcih0LHMsaSl7dGhpcy54PXQsdGhpcy55PXMsdGhpcy56PWksdGhpcy5zaXplPS41K01hdGgucmFuZG9tKCl9fWNvbnN0IHM9KCk9PjFlMyooTWF0aC5yYW5kb20oKS0uNSk7Y2xhc3MgaXtjb25maWc9e307c3RhcnM9W107Y29uc3RydWN0b3IodCl7dGhpcy5jYW52YXM9dCx0aGlzLmN0eD10aGlzLmNhbnZhcy5nZXRDb250ZXh0KCIyZCIpfXVwZGF0ZShpKXtmb3IoY29uc3RbbyxuXW9mIE9iamVjdC5lbnRyaWVzKGkpKWlmKHRoaXMuY29uZmlnW29dIT09bil7c3dpdGNoKG8pe2Nhc2UicmVzb2x1dGlvbiI6KGkuc3RhclNjYWxlfHx0aGlzLmNvbmZpZy5zdGFyU2NhbGUpJiYodGhpcy5zaXplPW4vKDEwLyhpLnN0YXJTY2FsZXx8dGhpcy5jb25maWcuc3RhclNjYWxlKSksdGhpcy5tYXhMaW5lV2lkdGg9dGhpcy5zaXplLzMwKTticmVhaztjYXNlInN0YXJTY2FsZSI6KGkucmVzb2x1dGlvbnx8dGhpcy5jb25maWcucmVzb2x1dGlvbikmJih0aGlzLnNpemU9KGkucmVzb2x1dGlvbnx8dGhpcy5jb25maWcucmVzb2x1dGlvbikvKDEwL24pLHRoaXMubWF4TGluZVdpZHRoPXRoaXMuc2l6ZS8zMCk7YnJlYWs7Y2FzZSJkZW5zaXR5Ijpjb25zdCBvPU1hdGguY2VpbCgxZTMqbiksYT1vLXRoaXMuc3RhcnMubGVuZ3RoO2lmKGE+MClmb3IobGV0IGk9MDtpPGE7aSsrKXtjb25zdCBpPW5ldyB0KHMoKSxzKCksMWUzKk1hdGgucmFuZG9tKCkpO3RoaXMuc3RhcnMucHVzaChpKX1lbHNlIHRoaXMuc3RhcnMubGVuZ3RoPW87YnJlYWs7Y2FzZSJzdGFyQ29sb3IiOmNvbnN0IGM9IiMiPT09KGU9bikuY2hhckF0KDApJiY3PT09ZS5sZW5ndGg/e3I6cGFyc2VJbnQoZS5zdWJzdHIoMSwyKSwxNiksZzpwYXJzZUludChlLnN1YnN0cigzLDIpLDE2KSxiOnBhcnNlSW50KGUuc3Vic3RyKDUsMiksMTYpfTp7cjoyNTUsZzoyNTUsYjoyNTV9O3RoaXMuc3RhclI9Yy5yLHRoaXMuc3Rhckc9Yy5nLHRoaXMuc3RhckI9Yy5ifXRoaXMuY29uZmlnW29dPW59dmFyIGV9ZHJhdyh0KXt0aGlzLm1vdmUodCk7Y29uc3Qgcz10aGlzLmNvbmZpZy5yZXNvbHV0aW9uLGk9dGhpcy5jb25maWcucmVzb2x1dGlvbjt0aGlzLnNpemU9TWF0aC5tYXgocyxpKS8oMTAvdGhpcy5jb25maWcuc3RhclNjYWxlKTtjb25zdCBlPXRoaXMuY3R4O2UuZmlsbFN0eWxlPXRoaXMuY29uZmlnLmJhY2tncm91bmRDb2xvcixlLmZpbGxSZWN0KDAsMCxzLGkpO2Zvcihjb25zdCB0IG9mIHRoaXMuc3RhcnMpe2NvbnN0IG89dC54L3QueixuPXQueS90Lno7aWYoIXRoaXMuY29uZmlnLndhcnBFZmZlY3QmJihvPC0uNXx8bz4uNXx8bjwtLjV8fG4+LjUpKWNvbnRpbnVlO2NvbnN0IGE9dC5zaXplKnRoaXMuc2l6ZS90Lno7aWYoIShhPC4zKSl7aWYodGhpcy5jb25maWcuZGVwdGhBbHBoYSl7Y29uc3Qgcz0oMWUzLXQueikvMWUzO2UuZmlsbFN0eWxlPWByZ2JhKCR7dGhpcy5zdGFyUn0sICR7dGhpcy5zdGFyR30sICR7dGhpcy5zdGFyQn0sICR7cy50b1N0cmluZygpfSlgfWVsc2UgZS5maWxsU3R5bGU9dGhpcy5jb25maWcuc3RhckNvbG9yO2lmKHRoaXMuY29uZmlnLndhcnBFZmZlY3Qpe2UuYmVnaW5QYXRoKCk7Y29uc3QgYz10LngvKHQueit0aGlzLmNvbmZpZy53YXJwRWZmZWN0TGVuZ3RoKnRoaXMuY29uZmlnLnNwZWVkKSxyPXQueS8odC56K3RoaXMuY29uZmlnLndhcnBFZmZlY3RMZW5ndGgqdGhpcy5jb25maWcuc3BlZWQpO2lmKGM8LS41fHxjPi41fHxyPC0uNXx8cj4uNSljb250aW51ZTtlLm1vdmVUbyhzKihvKy41KS1hLzIsaSoobisuNSktYS8yKSxlLmxpbmVUbyhzKihjKy41KS1hLzIsaSoocisuNSktYS8yKSxlLmxpbmVXaWR0aD1NYXRoLm1pbihhLHRoaXMubWF4TGluZVdpZHRoKSxlLmxpbmVDYXA9dGhpcy5jb25maWcudXNlQ2lyY2xlcz8icm91bmQiOiJidXR0IixlLnN0cm9rZVN0eWxlPWUuZmlsbFN0eWxlLGUuc3Ryb2tlKCl9ZWxzZSB0aGlzLmNvbmZpZy51c2VDaXJjbGVzPyhlLmJlZ2luUGF0aCgpLGUuYXJjKHMqKG8rLjUpLWEvMixpKihuKy41KS1hLzIsYS8yLDAsMipNYXRoLlBJKSxlLmZpbGwoKSk6ZS5maWxsUmVjdChzKihvKy41KS1hLzIsaSoobisuNSktYS8yLGEsYSl9fX1tb3ZlKHQpe2NvbnNvbGUubG9nKHRoaXMuY29uZmlnLnNwZWVkKTtjb25zdCBzPXRoaXMuY29uZmlnLnNwZWVkKih0LzEwKTtmb3IoY29uc3QgdCBvZiB0aGlzLnN0YXJzKWZvcih0LnotPXM7dC56PDE7KXQueis9MWUzLHQueD0oTWF0aC5yYW5kb20oKS0uNSkqdC56LHQueT0oTWF0aC5yYW5kb20oKS0uNSkqdC56fX1sZXQgZSxvLG47Y29uc3QgYT10PT57bnx8KGUuZHJhdyhudWxsPT09bz8xOnQtbyksbz10LHJlcXVlc3RBbmltYXRpb25GcmFtZShhKSl9O29ubWVzc2FnZT0oe2RhdGE6e2NhbnZhczp0LGNvbmZpZzpzLHBhdXNlOmN9fSk9Pnt2b2lkIDAhPT10JiYoZT1uZXcgaSh0KSksdm9pZCAwIT09cyYmZS51cGRhdGUocyksdm9pZCAwIT09YyYmKG49YyxufHwobz1udWxsLHJlcXVlc3RBbmltYXRpb25GcmFtZShhKSkpfX0oKTsKCg==",C="data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid29ya2VyLmpzIiwic291cmNlcyI6WyJ3b3JrZXI6L0M6XFx3ZWItd29ya2VyXFx3YXJwc3BlZWQuanMiLCJ3b3JrZXI6L0M6XFx3ZWItd29ya2VyXFx3b3JrZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgU3RhciB7XG4gIGNvbnN0cnVjdG9yKHgsIHksIHopIHtcbiAgICB0aGlzLnggPSB4XG4gICAgdGhpcy55ID0geVxuICAgIHRoaXMueiA9IHpcbiAgICB0aGlzLnNpemUgPSAwLjUgKyBNYXRoLnJhbmRvbSgpXG4gIH1cbn1cblxuY29uc3QgcmFuZFBvcyA9ICgpID0+IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDEwMDBcblxuY29uc3QgaGV4MnJnYiA9IHdlYkNvbG9yID0+XG4gIHdlYkNvbG9yLmNoYXJBdCgwKSA9PT0gXCIjXCIgJiYgd2ViQ29sb3IubGVuZ3RoID09PSA3XG4gICAgPyB7XG4gICAgICAgIHI6IHBhcnNlSW50KHdlYkNvbG9yLnN1YnN0cigxLCAyKSwgMTYpLFxuICAgICAgICBnOiBwYXJzZUludCh3ZWJDb2xvci5zdWJzdHIoMywgMiksIDE2KSxcbiAgICAgICAgYjogcGFyc2VJbnQod2ViQ29sb3Iuc3Vic3RyKDUsIDIpLCAxNiksXG4gICAgICB9XG4gICAgOiB7XG4gICAgICAgIHI6IDI1NSxcbiAgICAgICAgZzogMjU1LFxuICAgICAgICBiOiAyNTUsXG4gICAgICB9XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdhcnBTcGVlZCB7XG4gIGNvbmZpZyA9IHt9XG4gIHN0YXJzID0gW11cblxuICBjb25zdHJ1Y3RvcihjYW52YXMpIHtcbiAgICB0aGlzLmNhbnZhcyA9IGNhbnZhc1xuICAgIHRoaXMuY3R4ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpXG4gIH1cblxuICB1cGRhdGUoY29uZmlnKSB7XG4gICAgLy9MaWxpQ29kZTogbiB2dnZ2dnZ2dnZ2dnZ2dnZ2dnZqIG4gbiBuIG5cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhjb25maWcpKSB7XG4gICAgICBpZiAodGhpcy5jb25maWdba2V5XSAhPT0gdmFsdWUpIHtcbiAgICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgICBjYXNlIFwicmVzb2x1dGlvblwiOlxuICAgICAgICAgICAgaWYgKGNvbmZpZy5zdGFyU2NhbGUgfHwgdGhpcy5jb25maWcuc3RhclNjYWxlKSB7XG4gICAgICAgICAgICAgIHRoaXMuc2l6ZSA9IHZhbHVlIC8gKDEwIC8gKGNvbmZpZy5zdGFyU2NhbGUgfHwgdGhpcy5jb25maWcuc3RhclNjYWxlKSlcbiAgICAgICAgICAgICAgdGhpcy5tYXhMaW5lV2lkdGggPSB0aGlzLnNpemUgLyAzMFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlIFwic3RhclNjYWxlXCI6XG4gICAgICAgICAgICBpZiAoY29uZmlnLnJlc29sdXRpb24gfHwgdGhpcy5jb25maWcucmVzb2x1dGlvbikge1xuICAgICAgICAgICAgICB0aGlzLnNpemUgPSAoY29uZmlnLnJlc29sdXRpb24gfHwgdGhpcy5jb25maWcucmVzb2x1dGlvbikgLyAoMTAgLyB2YWx1ZSlcbiAgICAgICAgICAgICAgdGhpcy5tYXhMaW5lV2lkdGggPSB0aGlzLnNpemUgLyAzMFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlIFwiZGVuc2l0eVwiOlxuICAgICAgICAgICAgY29uc3Qgc3RhckNvdW50ID0gTWF0aC5jZWlsKHZhbHVlICogMTAwMClcbiAgICAgICAgICAgIGNvbnN0IGRpZmYgPSBzdGFyQ291bnQgLSB0aGlzLnN0YXJzLmxlbmd0aFxuICAgICAgICAgICAgaWYgKGRpZmYgPiAwKSB7XG4gICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGlmZjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhciA9IG5ldyBTdGFyKHJhbmRQb3MoKSwgcmFuZFBvcygpLCAxMDAwICogTWF0aC5yYW5kb20oKSlcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJzLnB1c2goc3RhcilcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy5zdGFycy5sZW5ndGggPSBzdGFyQ291bnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSBcInN0YXJDb2xvclwiOlxuICAgICAgICAgICAgY29uc3QgY29sb3IgPSBoZXgycmdiKHZhbHVlKVxuICAgICAgICAgICAgdGhpcy5zdGFyUiA9IGNvbG9yLnJcbiAgICAgICAgICAgIHRoaXMuc3RhckcgPSBjb2xvci5nXG4gICAgICAgICAgICB0aGlzLnN0YXJCID0gY29sb3IuYlxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbmZpZ1trZXldID0gdmFsdWVcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBkcmF3KHRpbWVEZWx0YSkge1xuICAgIHRoaXMubW92ZSh0aW1lRGVsdGEpXG5cbiAgICBjb25zdCB3aWR0aCA9IHRoaXMuY29uZmlnLnJlc29sdXRpb25cbiAgICBjb25zdCBoZWlnaHQgPSB0aGlzLmNvbmZpZy5yZXNvbHV0aW9uXG4gICAgdGhpcy5zaXplID0gTWF0aC5tYXgod2lkdGgsIGhlaWdodCkgLyAoMTAgLyB0aGlzLmNvbmZpZy5zdGFyU2NhbGUpXG5cbiAgICBjb25zdCBjdHggPSB0aGlzLmN0eFxuICAgIGN0eC5maWxsU3R5bGUgPSB0aGlzLmNvbmZpZy5iYWNrZ3JvdW5kQ29sb3JcbiAgICBjdHguZmlsbFJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodClcblxuICAgIGZvciAoY29uc3Qgc3RhciBvZiB0aGlzLnN0YXJzKSB7XG4gICAgICBjb25zdCB4T25EaXNwbGF5ID0gc3Rhci54IC8gc3Rhci56XG4gICAgICBjb25zdCB5T25EaXNwbGF5ID0gc3Rhci55IC8gc3Rhci56XG5cbiAgICAgIGlmICghdGhpcy5jb25maWcud2FycEVmZmVjdCAmJiAoeE9uRGlzcGxheSA8IC0wLjUgfHwgeE9uRGlzcGxheSA+IDAuNSB8fCB5T25EaXNwbGF5IDwgLTAuNSB8fCB5T25EaXNwbGF5ID4gMC41KSlcbiAgICAgICAgY29udGludWVcblxuICAgICAgY29uc3Qgc2l6ZSA9IChzdGFyLnNpemUgKiB0aGlzLnNpemUpIC8gc3Rhci56XG4gICAgICBpZiAoc2l6ZSA8IDAuMykgY29udGludWUgLy9kb24ndCBkcmF3IHZlcnkgc21hbGwgZG90c1xuXG4gICAgICBpZiAodGhpcy5jb25maWcuZGVwdGhBbHBoYSkge1xuICAgICAgICBjb25zdCBhbHBoYSA9ICgxMDAwIC0gc3Rhci56KSAvIDEwMDBcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGByZ2JhKCR7dGhpcy5zdGFyUn0sICR7dGhpcy5zdGFyR30sICR7dGhpcy5zdGFyQn0sICR7YWxwaGEudG9TdHJpbmcoKX0pYFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHRoaXMuY29uZmlnLnN0YXJDb2xvclxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5jb25maWcud2FycEVmZmVjdCkge1xuICAgICAgICBjdHguYmVnaW5QYXRoKClcbiAgICAgICAgY29uc3QgeDJPbkRpc3BsYXkgPSBzdGFyLnggLyAoc3Rhci56ICsgdGhpcy5jb25maWcud2FycEVmZmVjdExlbmd0aCAqIHRoaXMuY29uZmlnLnNwZWVkKVxuICAgICAgICBjb25zdCB5Mk9uRGlzcGxheSA9IHN0YXIueSAvIChzdGFyLnogKyB0aGlzLmNvbmZpZy53YXJwRWZmZWN0TGVuZ3RoICogdGhpcy5jb25maWcuc3BlZWQpXG5cbiAgICAgICAgaWYgKHgyT25EaXNwbGF5IDwgLTAuNSB8fCB4Mk9uRGlzcGxheSA+IDAuNSB8fCB5Mk9uRGlzcGxheSA8IC0wLjUgfHwgeTJPbkRpc3BsYXkgPiAwLjUpIGNvbnRpbnVlXG5cbiAgICAgICAgY3R4Lm1vdmVUbyh3aWR0aCAqICh4T25EaXNwbGF5ICsgMC41KSAtIHNpemUgLyAyLCBoZWlnaHQgKiAoeU9uRGlzcGxheSArIDAuNSkgLSBzaXplIC8gMilcbiAgICAgICAgY3R4LmxpbmVUbyh3aWR0aCAqICh4Mk9uRGlzcGxheSArIDAuNSkgLSBzaXplIC8gMiwgaGVpZ2h0ICogKHkyT25EaXNwbGF5ICsgMC41KSAtIHNpemUgLyAyKVxuICAgICAgICBjdHgubGluZVdpZHRoID0gTWF0aC5taW4oc2l6ZSwgdGhpcy5tYXhMaW5lV2lkdGgpXG4gICAgICAgIGN0eC5saW5lQ2FwID0gdGhpcy5jb25maWcudXNlQ2lyY2xlcyA/IFwicm91bmRcIiA6IFwiYnV0dFwiXG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IGN0eC5maWxsU3R5bGVcbiAgICAgICAgY3R4LnN0cm9rZSgpXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuY29uZmlnLnVzZUNpcmNsZXMpIHtcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpXG4gICAgICAgIGN0eC5hcmMod2lkdGggKiAoeE9uRGlzcGxheSArIDAuNSkgLSBzaXplIC8gMiwgaGVpZ2h0ICogKHlPbkRpc3BsYXkgKyAwLjUpIC0gc2l6ZSAvIDIsIHNpemUgLyAyLCAwLCAyICogTWF0aC5QSSlcbiAgICAgICAgY3R4LmZpbGwoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3R4LmZpbGxSZWN0KHdpZHRoICogKHhPbkRpc3BsYXkgKyAwLjUpIC0gc2l6ZSAvIDIsIGhlaWdodCAqICh5T25EaXNwbGF5ICsgMC41KSAtIHNpemUgLyAyLCBzaXplLCBzaXplKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIG1vdmUodGltZURlbHRhKSB7XG4gICAgY29uc29sZS5sb2codGhpcy5jb25maWcuc3BlZWQpXG4gICAgY29uc3Qgc3BlZWQgPSB0aGlzLmNvbmZpZy5zcGVlZCAqICh0aW1lRGVsdGEgLyAxMClcblxuICAgIGZvciAoY29uc3Qgc3RhciBvZiB0aGlzLnN0YXJzKSB7XG4gICAgICBzdGFyLnogLT0gc3BlZWRcbiAgICAgIHdoaWxlIChzdGFyLnogPCAxKSB7XG4gICAgICAgIHN0YXIueiArPSAxMDAwXG4gICAgICAgIHN0YXIueCA9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIHN0YXIuelxuICAgICAgICBzdGFyLnkgPSAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiBzdGFyLnpcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCBXYXJwU3BlZWQgZnJvbSBcIi4vd2FycHNwZWVkXCJcblxubGV0IHdhcnBzcGVlZFxubGV0IGxhc3RUaW1lXG5sZXQgcGF1c2VkXG5cbmNvbnN0IHRpY2sgPSB0aW1lID0+IHtcbiAgaWYgKHBhdXNlZCkgcmV0dXJuXG4gIHdhcnBzcGVlZC5kcmF3KGxhc3RUaW1lID09PSBudWxsID8gMSA6IHRpbWUgLSBsYXN0VGltZSlcbiAgbGFzdFRpbWUgPSB0aW1lXG4gIHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aWNrKVxufVxuXG5vbm1lc3NhZ2UgPSAoeyBkYXRhOiB7IGNhbnZhcywgY29uZmlnLCBwYXVzZSB9IH0pID0+IHtcbiAgaWYgKGNhbnZhcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgd2FycHNwZWVkID0gbmV3IFdhcnBTcGVlZChjYW52YXMpXG4gIH1cblxuICBpZiAoY29uZmlnICE9PSB1bmRlZmluZWQpIHtcbiAgICB3YXJwc3BlZWQudXBkYXRlKGNvbmZpZylcbiAgfVxuXG4gIGlmIChwYXVzZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcGF1c2VkID0gcGF1c2VcbiAgICBpZiAoIXBhdXNlZCkge1xuICAgICAgbGFzdFRpbWUgPSBudWxsXG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGljaylcbiAgICB9XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJTdGFyIiwiW29iamVjdCBPYmplY3RdIiwieCIsInkiLCJ6IiwidGhpcyIsInNpemUiLCJNYXRoIiwicmFuZG9tIiwicmFuZFBvcyIsIldhcnBTcGVlZCIsImNhbnZhcyIsImN0eCIsImdldENvbnRleHQiLCJjb25maWciLCJrZXkiLCJ2YWx1ZSIsIk9iamVjdCIsImVudHJpZXMiLCJzdGFyU2NhbGUiLCJtYXhMaW5lV2lkdGgiLCJyZXNvbHV0aW9uIiwic3RhckNvdW50IiwiY2VpbCIsImRpZmYiLCJzdGFycyIsImxlbmd0aCIsImkiLCJzdGFyIiwicHVzaCIsImNvbG9yIiwid2ViQ29sb3IiLCJjaGFyQXQiLCJyIiwicGFyc2VJbnQiLCJzdWJzdHIiLCJnIiwiYiIsInN0YXJSIiwic3RhckciLCJzdGFyQiIsInRpbWVEZWx0YSIsIm1vdmUiLCJ3aWR0aCIsImhlaWdodCIsIm1heCIsImZpbGxTdHlsZSIsImJhY2tncm91bmRDb2xvciIsImZpbGxSZWN0IiwieE9uRGlzcGxheSIsInlPbkRpc3BsYXkiLCJ3YXJwRWZmZWN0IiwiZGVwdGhBbHBoYSIsImFscGhhIiwidG9TdHJpbmciLCJzdGFyQ29sb3IiLCJiZWdpblBhdGgiLCJ4Mk9uRGlzcGxheSIsIndhcnBFZmZlY3RMZW5ndGgiLCJzcGVlZCIsInkyT25EaXNwbGF5IiwibW92ZVRvIiwibGluZVRvIiwibGluZVdpZHRoIiwibWluIiwibGluZUNhcCIsInVzZUNpcmNsZXMiLCJzdHJva2VTdHlsZSIsInN0cm9rZSIsImFyYyIsIlBJIiwiZmlsbCIsImNvbnNvbGUiLCJsb2ciLCJ3YXJwc3BlZWQiLCJsYXN0VGltZSIsInBhdXNlZCIsInRpY2siLCJ0aW1lIiwiZHJhdyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm9ubWVzc2FnZSIsImRhdGEiLCJwYXVzZSIsInVuZGVmaW5lZCIsInVwZGF0ZSJdLCJtYXBwaW5ncyI6InlCQUFBLE1BQU1BLEVBQ0pDLFlBQVlDLEVBQUdDLEVBQUdDLEdBQ2hCQyxLQUFLSCxFQUFJQSxFQUNURyxLQUFLRixFQUFJQSxFQUNURSxLQUFLRCxFQUFJQSxFQUNUQyxLQUFLQyxLQUFPLEdBQU1DLEtBQUtDLFVBSTNCLE1BQU1DLEVBQVUsSUFBOEIsS0FBdkJGLEtBQUtDLFNBQVcsSUFleEIsTUFBTUUsRUFD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",B=!1,function(I){return F=F||U(c,C,B),new Worker(F,I)});AFRAME.registerComponent("warpspeed",{schema:{resolution:{type:"number",default:512},speed:{type:"number",default:.7},density:{type:"number",default:.7},useCircles:{type:"boolean",default:!0},depthAlpha:{type:"boolean",default:!0},warpEffect:{type:"boolean",default:!0},warpEffectLength:{type:"number",default:5},starScale:{type:"number",default:3},backgroundColor:{type:"color",default:"#100a1a"},starColor:{type:"color",default:"#ffffff"},useWorker:{type:"boolean",default:!1}},update(I){if(I.useWorker!==this.data.useWorker)if(void 0!==I.useWorker&&(I.useWorker?(this.worker.terminate(),delete this.worker):delete this.warpspeed,this.canvasMap.dispose(),delete this.canvas),this.canvas=document.createElement("canvas"),this.canvas.width=this.data.resolution,this.canvas.height=this.data.resolution,this.canvasMap=new THREE.Texture(this.canvas),this.el.getObject3D("mesh").material.map=this.canvasMap,this.data.useWorker){const I=this.canvas.transferControlToOffscreen();this.worker=new Q,this.worker.postMessage({canvas:I},[I])}else this.warpspeed=new s(this.canvas);this.data.useWorker?this.worker.postMessage({config:this.data,pause:!this.isPlaying}):this.warpspeed.update(this.data)},play(){this.data.useWorker&&this.worker.postMessage({pause:!1})},pause(){this.data.useWorker&&this.worker.postMessage({pause:!0})},tick(I,g){this.data.useWorker||this.warpspeed.draw(g),this.canvasMap.needsUpdate=!0}});
