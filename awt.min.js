class I{constructor(I,g,s){this.x=I,this.y=g,this.z=s,this.size=.5+Math.random()}}const g=()=>1e3*(Math.random()-.5);class s{config={};stars=[];starR=255;starG=255;starB=255;constructor(I){this.canvas=I,this.ctx=this.canvas.getContext("2d")}update(s){for(const[U,B]of Object.entries(s))if(this.config[U]!==B){switch(U){case"speed":case"targetSpeed":case"speedAdjFactor":this.speed=s.speed||this.config.speed;break;case"resolution":(s.starScale||this.config.starScale)&&(this.size=B/(10/(s.starScale||this.config.starScale)),this.maxLineWidth=this.size/30);break;case"starScale":(s.resolution||this.config.resolution)&&(this.size=(s.resolution||this.config.resolution)/(10/B),this.maxLineWidth=this.size/30);break;case"density":const U=Math.ceil(1e3*B),c=U-this.stars.length;if(c>0)for(let s=0;s<c;s++){const s=new I(g(),g(),1e3*Math.random());this.stars.push(s)}else this.stars.length=U;break;case"starColor":const C="#"===(F=B).charAt(0)&&7===F.length?{r:parseInt(F.substr(1,2),16),g:parseInt(F.substr(3,2),16),b:parseInt(F.substr(5,2),16)}:{r:255,g:255,b:255};this.starR=C.r,this.starG=C.g,this.starB=C.b}this.config[U]=B}var F}draw(I){this.move(I);const g=this.config.resolution,s=this.config.resolution;this.size=Math.max(g,s)/(10/this.config.starScale);const F=this.ctx;F.fillStyle=this.config.backgroundColor,F.fillRect(0,0,g,s);for(const I of this.stars){const U=I.x/I.z,B=I.y/I.z;if(!this.config.warpEffect&&(U<-.5||U>.5||B<-.5||B>.5))continue;const c=I.size*this.size/I.z;if(!(c<.3)){if(this.config.depthAlpha){const g=(1e3-I.z)/1e3;F.fillStyle=`rgba(${this.starR}, ${this.starG}, ${this.starB}, ${g.toString()})`}else F.fillStyle=this.config.starColor;if(this.config.warpEffect){F.beginPath();const C=I.x/(I.z+this.config.warpEffectLength*this.speed),Q=I.y/(I.z+this.config.warpEffectLength*this.speed);if(C<-.5||C>.5||Q<-.5||Q>.5)continue;F.moveTo(g*(U+.5)-c/2,s*(B+.5)-c/2),F.lineTo(g*(C+.5)-c/2,s*(Q+.5)-c/2),F.lineWidth=Math.min(c,this.maxLineWidth),F.lineCap=this.config.useCircles?"round":"butt",F.strokeStyle=F.fillStyle,F.stroke()}else this.config.useCircles?(F.beginPath(),F.arc(g*(U+.5)-c/2,s*(B+.5)-c/2,c/2,0,2*Math.PI),F.fill()):F.fillRect(g*(U+.5)-c/2,s*(B+.5)-c/2,c,c)}}}move(I){const g=I/10,s=Math.pow(this.config.speedAdjFactor,1/g);this.speed=this.config.targetSpeed*s+this.speed*(1-s),this.speed<0&&(this.speed=0);const F=this.speed*g;for(const I of this.stars)for(I.z-=F;I.z<1;)I.z+=1e3,I.x=(Math.random()-.5)*I.z,I.y=(Math.random()-.5)*I.z}}function F(I,g,s){var F=void 0===g?null:g,U=function(I,g){var s=atob(I);if(g){for(var F=new Uint8Array(s.length),U=0,B=s.length;U<B;++U)F[U]=s.charCodeAt(U);return String.fromCharCode.apply(null,new Uint16Array(F.buffer))}return s}(I,void 0!==s&&s),B=U.indexOf("\n",10)+1,c=U.substring(B)+(F?"//# sourceMappingURL="+F:""),C=new Blob([c],{type:"application/javascript"});return URL.createObjectURL(C)}var U,B,c,C,Q=(U="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Y2xhc3MgdHtjb25zdHJ1Y3Rvcih0LHMsaSl7dGhpcy54PXQsdGhpcy55PXMsdGhpcy56PWksdGhpcy5zaXplPS41K01hdGgucmFuZG9tKCl9fWNvbnN0IHM9KCk9PjFlMyooTWF0aC5yYW5kb20oKS0uNSk7Y2xhc3MgaXtjb25maWc9e307c3RhcnM9W107c3RhclI9MjU1O3N0YXJHPTI1NTtzdGFyQj0yNTU7Y29uc3RydWN0b3IodCl7dGhpcy5jYW52YXM9dCx0aGlzLmN0eD10aGlzLmNhbnZhcy5nZXRDb250ZXh0KCIyZCIpfXVwZGF0ZShpKXtmb3IoY29uc3RbYSxvXW9mIE9iamVjdC5lbnRyaWVzKGkpKWlmKHRoaXMuY29uZmlnW2FdIT09byl7c3dpdGNoKGEpe2Nhc2Uic3BlZWQiOmNhc2UidGFyZ2V0U3BlZWQiOmNhc2Uic3BlZWRBZGpGYWN0b3IiOnRoaXMuc3BlZWQ9aS5zcGVlZHx8dGhpcy5jb25maWcuc3BlZWQ7YnJlYWs7Y2FzZSJyZXNvbHV0aW9uIjooaS5zdGFyU2NhbGV8fHRoaXMuY29uZmlnLnN0YXJTY2FsZSkmJih0aGlzLnNpemU9by8oMTAvKGkuc3RhclNjYWxlfHx0aGlzLmNvbmZpZy5zdGFyU2NhbGUpKSx0aGlzLm1heExpbmVXaWR0aD10aGlzLnNpemUvMzApO2JyZWFrO2Nhc2Uic3RhclNjYWxlIjooaS5yZXNvbHV0aW9ufHx0aGlzLmNvbmZpZy5yZXNvbHV0aW9uKSYmKHRoaXMuc2l6ZT0oaS5yZXNvbHV0aW9ufHx0aGlzLmNvbmZpZy5yZXNvbHV0aW9uKS8oMTAvbyksdGhpcy5tYXhMaW5lV2lkdGg9dGhpcy5zaXplLzMwKTticmVhaztjYXNlImRlbnNpdHkiOmNvbnN0IGE9TWF0aC5jZWlsKDFlMypvKSxuPWEtdGhpcy5zdGFycy5sZW5ndGg7aWYobj4wKWZvcihsZXQgaT0wO2k8bjtpKyspe2NvbnN0IGk9bmV3IHQocygpLHMoKSwxZTMqTWF0aC5yYW5kb20oKSk7dGhpcy5zdGFycy5wdXNoKGkpfWVsc2UgdGhpcy5zdGFycy5sZW5ndGg9YTticmVhaztjYXNlInN0YXJDb2xvciI6Y29uc3Qgcj0iIyI9PT0oZT1vKS5jaGFyQXQoMCkmJjc9PT1lLmxlbmd0aD97cjpwYXJzZUludChlLnN1YnN0cigxLDIpLDE2KSxnOnBhcnNlSW50KGUuc3Vic3RyKDMsMiksMTYpLGI6cGFyc2VJbnQoZS5zdWJzdHIoNSwyKSwxNil9OntyOjI1NSxnOjI1NSxiOjI1NX07dGhpcy5zdGFyUj1yLnIsdGhpcy5zdGFyRz1yLmcsdGhpcy5zdGFyQj1yLmJ9dGhpcy5jb25maWdbYV09b312YXIgZX1kcmF3KHQpe3RoaXMubW92ZSh0KTtjb25zdCBzPXRoaXMuY29uZmlnLnJlc29sdXRpb24saT10aGlzLmNvbmZpZy5yZXNvbHV0aW9uO3RoaXMuc2l6ZT1NYXRoLm1heChzLGkpLygxMC90aGlzLmNvbmZpZy5zdGFyU2NhbGUpO2NvbnN0IGU9dGhpcy5jdHg7ZS5maWxsU3R5bGU9dGhpcy5jb25maWcuYmFja2dyb3VuZENvbG9yLGUuZmlsbFJlY3QoMCwwLHMsaSk7Zm9yKGNvbnN0IHQgb2YgdGhpcy5zdGFycyl7Y29uc3QgYT10LngvdC56LG89dC55L3QuejtpZighdGhpcy5jb25maWcud2FycEVmZmVjdCYmKGE8LS41fHxhPi41fHxvPC0uNXx8bz4uNSkpY29udGludWU7Y29uc3Qgbj10LnNpemUqdGhpcy5zaXplL3QuejtpZighKG48LjMpKXtpZih0aGlzLmNvbmZpZy5kZXB0aEFscGhhKXtjb25zdCBzPSgxZTMtdC56KS8xZTM7ZS5maWxsU3R5bGU9YHJnYmEoJHt0aGlzLnN0YXJSfSwgJHt0aGlzLnN0YXJHfSwgJHt0aGlzLnN0YXJCfSwgJHtzLnRvU3RyaW5nKCl9KWB9ZWxzZSBlLmZpbGxTdHlsZT10aGlzLmNvbmZpZy5zdGFyQ29sb3I7aWYodGhpcy5jb25maWcud2FycEVmZmVjdCl7ZS5iZWdpblBhdGgoKTtjb25zdCByPXQueC8odC56K3RoaXMuY29uZmlnLndhcnBFZmZlY3RMZW5ndGgqdGhpcy5zcGVlZCksaD10LnkvKHQueit0aGlzLmNvbmZpZy53YXJwRWZmZWN0TGVuZ3RoKnRoaXMuc3BlZWQpO2lmKHI8LS41fHxyPi41fHxoPC0uNXx8aD4uNSljb250aW51ZTtlLm1vdmVUbyhzKihhKy41KS1uLzIsaSoobysuNSktbi8yKSxlLmxpbmVUbyhzKihyKy41KS1uLzIsaSooaCsuNSktbi8yKSxlLmxpbmVXaWR0aD1NYXRoLm1pbihuLHRoaXMubWF4TGluZVdpZHRoKSxlLmxpbmVDYXA9dGhpcy5jb25maWcudXNlQ2lyY2xlcz8icm91bmQiOiJidXR0IixlLnN0cm9rZVN0eWxlPWUuZmlsbFN0eWxlLGUuc3Ryb2tlKCl9ZWxzZSB0aGlzLmNvbmZpZy51c2VDaXJjbGVzPyhlLmJlZ2luUGF0aCgpLGUuYXJjKHMqKGErLjUpLW4vMixpKihvKy41KS1uLzIsbi8yLDAsMipNYXRoLlBJKSxlLmZpbGwoKSk6ZS5maWxsUmVjdChzKihhKy41KS1uLzIsaSoobysuNSktbi8yLG4sbil9fX1tb3ZlKHQpe2NvbnN0IHM9dC8xMCxpPU1hdGgucG93KHRoaXMuY29uZmlnLnNwZWVkQWRqRmFjdG9yLDEvcyk7dGhpcy5zcGVlZD10aGlzLmNvbmZpZy50YXJnZXRTcGVlZCppK3RoaXMuc3BlZWQqKDEtaSksdGhpcy5zcGVlZDwwJiYodGhpcy5zcGVlZD0wKTtjb25zdCBlPXRoaXMuc3BlZWQqcztmb3IoY29uc3QgdCBvZiB0aGlzLnN0YXJzKWZvcih0LnotPWU7dC56PDE7KXQueis9MWUzLHQueD0oTWF0aC5yYW5kb20oKS0uNSkqdC56LHQueT0oTWF0aC5yYW5kb20oKS0uNSkqdC56fX1sZXQgZSxhLG87Y29uc3Qgbj10PT57b3x8KGUuZHJhdyhudWxsPT09YT8xOnQtYSksYT10LHJlcXVlc3RBbmltYXRpb25GcmFtZShuKSl9O29ubWVzc2FnZT0oe2RhdGE6e2NhbnZhczp0LGNvbmZpZzpzLHBhdXNlOnJ9fSk9Pnt2b2lkIDAhPT10JiYoZT1uZXcgaSh0KSksdm9pZCAwIT09cyYmZS51cGRhdGUocyksdm9pZCAwIT09ciYmKG89cixvfHwoYT1udWxsLHJlcXVlc3RBbmltYXRpb25GcmFtZShuKSkpfX0oKTsKCg==",B="data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid29ya2VyLmpzIiwic291cmNlcyI6WyJ3b3JrZXI6L0M6XFx3ZWItd29ya2VyXFx3YXJwc3BlZWQuanMiLCJ3b3JrZXI6L0M6XFx3ZWItd29ya2VyXFx3b3JrZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgU3RhciB7XG4gIGNvbnN0cnVjdG9yKHgsIHksIHopIHtcbiAgICB0aGlzLnggPSB4XG4gICAgdGhpcy55ID0geVxuICAgIHRoaXMueiA9IHpcbiAgICB0aGlzLnNpemUgPSAwLjUgKyBNYXRoLnJhbmRvbSgpXG4gIH1cbn1cblxuY29uc3QgcmFuZFBvcyA9ICgpID0+IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDEwMDBcblxuY29uc3QgaGV4MnJnYiA9IHdlYkNvbG9yID0+XG4gIHdlYkNvbG9yLmNoYXJBdCgwKSA9PT0gXCIjXCIgJiYgd2ViQ29sb3IubGVuZ3RoID09PSA3XG4gICAgPyB7XG4gICAgICAgIHI6IHBhcnNlSW50KHdlYkNvbG9yLnN1YnN0cigxLCAyKSwgMTYpLFxuICAgICAgICBnOiBwYXJzZUludCh3ZWJDb2xvci5zdWJzdHIoMywgMiksIDE2KSxcbiAgICAgICAgYjogcGFyc2VJbnQod2ViQ29sb3Iuc3Vic3RyKDUsIDIpLCAxNiksXG4gICAgICB9XG4gICAgOiB7XG4gICAgICAgIHI6IDI1NSxcbiAgICAgICAgZzogMjU1LFxuICAgICAgICBiOiAyNTUsXG4gICAgICB9XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdhcnBTcGVlZCB7XG4gIGNvbmZpZyA9IHt9XG4gIHN0YXJzID0gW11cblxuICBzdGFyUiA9IDI1NVxuICBzdGFyRyA9IDI1NVxuICBzdGFyQiA9IDI1NVxuXG4gIGNvbnN0cnVjdG9yKGNhbnZhcykge1xuICAgIHRoaXMuY2FudmFzID0gY2FudmFzXG4gICAgdGhpcy5jdHggPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIilcbiAgfVxuXG4gIHVwZGF0ZShjb25maWcpIHtcbiAgICAvL0xpbGlDb2RlOiBuIHZ2dnZ2dnZ2dnZ2dnZ2dnZ2dmogbiBuIG4gblxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGNvbmZpZykpIHtcbiAgICAgIGlmICh0aGlzLmNvbmZpZ1trZXldICE9PSB2YWx1ZSkge1xuICAgICAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgICAgIGNhc2UgXCJzcGVlZFwiOlxuICAgICAgICAgIGNhc2UgXCJ0YXJnZXRTcGVlZFwiOlxuICAgICAgICAgIGNhc2UgXCJzcGVlZEFkakZhY3RvclwiOlxuICAgICAgICAgICAgdGhpcy5zcGVlZCA9IGNvbmZpZy5zcGVlZCB8fCB0aGlzLmNvbmZpZy5zcGVlZFxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlIFwicmVzb2x1dGlvblwiOlxuICAgICAgICAgICAgaWYgKGNvbmZpZy5zdGFyU2NhbGUgfHwgdGhpcy5jb25maWcuc3RhclNjYWxlKSB7XG4gICAgICAgICAgICAgIHRoaXMuc2l6ZSA9IHZhbHVlIC8gKDEwIC8gKGNvbmZpZy5zdGFyU2NhbGUgfHwgdGhpcy5jb25maWcuc3RhclNjYWxlKSlcbiAgICAgICAgICAgICAgdGhpcy5tYXhMaW5lV2lkdGggPSB0aGlzLnNpemUgLyAzMFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlIFwic3RhclNjYWxlXCI6XG4gICAgICAgICAgICBpZiAoY29uZmlnLnJlc29sdXRpb24gfHwgdGhpcy5jb25maWcucmVzb2x1dGlvbikge1xuICAgICAgICAgICAgICB0aGlzLnNpemUgPSAoY29uZmlnLnJlc29sdXRpb24gfHwgdGhpcy5jb25maWcucmVzb2x1dGlvbikgLyAoMTAgLyB2YWx1ZSlcbiAgICAgICAgICAgICAgdGhpcy5tYXhMaW5lV2lkdGggPSB0aGlzLnNpemUgLyAzMFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlIFwiZGVuc2l0eVwiOlxuICAgICAgICAgICAgY29uc3Qgc3RhckNvdW50ID0gTWF0aC5jZWlsKHZhbHVlICogMTAwMClcbiAgICAgICAgICAgIGNvbnN0IGRpZmYgPSBzdGFyQ291bnQgLSB0aGlzLnN0YXJzLmxlbmd0aFxuICAgICAgICAgICAgaWYgKGRpZmYgPiAwKSB7XG4gICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGlmZjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhciA9IG5ldyBTdGFyKHJhbmRQb3MoKSwgcmFuZFBvcygpLCAxMDAwICogTWF0aC5yYW5kb20oKSlcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJzLnB1c2goc3RhcilcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy5zdGFycy5sZW5ndGggPSBzdGFyQ291bnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSBcInN0YXJDb2xvclwiOlxuICAgICAgICAgICAgY29uc3QgY29sb3IgPSBoZXgycmdiKHZhbHVlKVxuICAgICAgICAgICAgdGhpcy5zdGFyUiA9IGNvbG9yLnJcbiAgICAgICAgICAgIHRoaXMuc3RhckcgPSBjb2xvci5nXG4gICAgICAgICAgICB0aGlzLnN0YXJCID0gY29sb3IuYlxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbmZpZ1trZXldID0gdmFsdWVcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBkcmF3KHRpbWVEZWx0YSkge1xuICAgIC8vIGNvbnNvbGUubG9nKHRpbWVEZWx0YSlcbiAgICB0aGlzLm1vdmUodGltZURlbHRhKVxuXG4gICAgY29uc3Qgd2lkdGggPSB0aGlzLmNvbmZpZy5yZXNvbHV0aW9uXG4gICAgY29uc3QgaGVpZ2h0ID0gdGhpcy5jb25maWcucmVzb2x1dGlvblxuICAgIHRoaXMuc2l6ZSA9IE1hdGgubWF4KHdpZHRoLCBoZWlnaHQpIC8gKDEwIC8gdGhpcy5jb25maWcuc3RhclNjYWxlKVxuXG4gICAgY29uc3QgY3R4ID0gdGhpcy5jdHhcbiAgICBjdHguZmlsbFN0eWxlID0gdGhpcy5jb25maWcuYmFja2dyb3VuZENvbG9yXG4gICAgY3R4LmZpbGxSZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpXG5cbiAgICBmb3IgKGNvbnN0IHMgb2YgdGhpcy5zdGFycykge1xuICAgICAgY29uc3QgeE9uRGlzcGxheSA9IHMueCAvIHMuelxuICAgICAgY29uc3QgeU9uRGlzcGxheSA9IHMueSAvIHMuelxuXG4gICAgICBpZiAoIXRoaXMuY29uZmlnLndhcnBFZmZlY3QgJiYgKHhPbkRpc3BsYXkgPCAtMC41IHx8IHhPbkRpc3BsYXkgPiAwLjUgfHwgeU9uRGlzcGxheSA8IC0wLjUgfHwgeU9uRGlzcGxheSA+IDAuNSkpXG4gICAgICAgIGNvbnRpbnVlXG5cbiAgICAgIGNvbnN0IHNpemUgPSAocy5zaXplICogdGhpcy5zaXplKSAvIHMuelxuICAgICAgaWYgKHNpemUgPCAwLjMpIGNvbnRpbnVlIC8vZG9uJ3QgZHJhdyB2ZXJ5IHNtYWxsIGRvdHNcblxuICAgICAgaWYgKHRoaXMuY29uZmlnLmRlcHRoQWxwaGEpIHtcbiAgICAgICAgY29uc3QgYWxwaGEgPSAoMTAwMCAtIHMueikgLyAxMDAwXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBgcmdiYSgke3RoaXMuc3RhclJ9LCAke3RoaXMuc3Rhckd9LCAke3RoaXMuc3RhckJ9LCAke2FscGhhLnRvU3RyaW5nKCl9KWBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSB0aGlzLmNvbmZpZy5zdGFyQ29sb3JcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuY29uZmlnLndhcnBFZmZlY3QpIHtcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpXG4gICAgICAgIGNvbnN0IHgyT25EaXNwbGF5ID0gcy54IC8gKHMueiArIHRoaXMuY29uZmlnLndhcnBFZmZlY3RMZW5ndGggKiB0aGlzLnNwZWVkKVxuICAgICAgICBjb25zdCB5Mk9uRGlzcGxheSA9IHMueSAvIChzLnogKyB0aGlzLmNvbmZpZy53YXJwRWZmZWN0TGVuZ3RoICogdGhpcy5zcGVlZClcblxuICAgICAgICBpZiAoeDJPbkRpc3BsYXkgPCAtMC41IHx8IHgyT25EaXNwbGF5ID4gMC41IHx8IHkyT25EaXNwbGF5IDwgLTAuNSB8fCB5Mk9uRGlzcGxheSA+IDAuNSkgY29udGludWVcblxuICAgICAgICBjdHgubW92ZVRvKHdpZHRoICogKHhPbkRpc3BsYXkgKyAwLjUpIC0gc2l6ZSAvIDIsIGhlaWdodCAqICh5T25EaXNwbGF5ICsgMC41KSAtIHNpemUgLyAyKVxuICAgICAgICBjdHgubGluZVRvKHdpZHRoICogKHgyT25EaXNwbGF5ICsgMC41KSAtIHNpemUgLyAyLCBoZWlnaHQgKiAoeTJPbkRpc3BsYXkgKyAwLjUpIC0gc2l6ZSAvIDIpXG4gICAgICAgIGN0eC5saW5lV2lkdGggPSBNYXRoLm1pbihzaXplLCB0aGlzLm1heExpbmVXaWR0aClcbiAgICAgICAgY3R4LmxpbmVDYXAgPSB0aGlzLmNvbmZpZy51c2VDaXJjbGVzID8gXCJyb3VuZFwiIDogXCJidXR0XCJcbiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gY3R4LmZpbGxTdHlsZVxuICAgICAgICBjdHguc3Ryb2tlKClcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5jb25maWcudXNlQ2lyY2xlcykge1xuICAgICAgICBjdHguYmVnaW5QYXRoKClcbiAgICAgICAgY3R4LmFyYyh3aWR0aCAqICh4T25EaXNwbGF5ICsgMC41KSAtIHNpemUgLyAyLCBoZWlnaHQgKiAoeU9uRGlzcGxheSArIDAuNSkgLSBzaXplIC8gMiwgc2l6ZSAvIDIsIDAsIDIgKiBNYXRoLlBJKVxuICAgICAgICBjdHguZmlsbCgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdHguZmlsbFJlY3Qod2lkdGggKiAoeE9uRGlzcGxheSArIDAuNSkgLSBzaXplIC8gMiwgaGVpZ2h0ICogKHlPbkRpc3BsYXkgKyAwLjUpIC0gc2l6ZSAvIDIsIHNpemUsIHNpemUpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgbW92ZSh0aW1lRGVsdGEpIHtcbiAgICBjb25zdCBzcGVlZE11bEYgPSB0aW1lRGVsdGEgLyAxMCAvLyAvIDE2LjVcbiAgICBjb25zdCBzcGVlZEFkakYgPSBNYXRoLnBvdyh0aGlzLmNvbmZpZy5zcGVlZEFkakZhY3RvciwgMSAvIHNwZWVkTXVsRilcbiAgICB0aGlzLnNwZWVkID0gdGhpcy5jb25maWcudGFyZ2V0U3BlZWQgKiBzcGVlZEFkakYgKyB0aGlzLnNwZWVkICogKDEgLSBzcGVlZEFkakYpXG4gICAgaWYgKHRoaXMuc3BlZWQgPCAwKSB0aGlzLnNwZWVkID0gMFxuICAgIGNvbnN0IHNwZWVkID0gdGhpcy5zcGVlZCAqIHNwZWVkTXVsRlxuXG4gICAgZm9yIChjb25zdCBzdGFyIG9mIHRoaXMuc3RhcnMpIHtcbiAgICAgIHN0YXIueiAtPSBzcGVlZFxuICAgICAgd2hpbGUgKHN0YXIueiA8IDEpIHtcbiAgICAgICAgc3Rhci56ICs9IDEwMDBcbiAgICAgICAgc3Rhci54ID0gKE1hdGgucmFuZG9tKCkgLSAwLjUpICogc3Rhci56XG4gICAgICAgIHN0YXIueSA9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIHN0YXIuelxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IFdhcnBTcGVlZCBmcm9tIFwiLi93YXJwc3BlZWRcIlxuXG5sZXQgd2FycHNwZWVkXG5sZXQgbGFzdFRpbWVcbmxldCBwYXVzZWRcblxuY29uc3QgdGljayA9IHRpbWUgPT4ge1xuICBpZiAocGF1c2VkKSByZXR1cm5cbiAgd2FycHNwZWVkLmRyYXcobGFzdFRpbWUgPT09IG51bGwgPyAxIDogdGltZSAtIGxhc3RUaW1lKVxuICBsYXN0VGltZSA9IHRpbWVcbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRpY2spXG59XG5cbm9ubWVzc2FnZSA9ICh7IGRhdGE6IHsgY2FudmFzLCBjb25maWcsIHBhdXNlIH0gfSkgPT4ge1xuICBpZiAoY2FudmFzICE9PSB1bmRlZmluZWQpIHtcbiAgICB3YXJwc3BlZWQgPSBuZXcgV2FycFNwZWVkKGNhbnZhcylcbiAgfVxuXG4gIGlmIChjb25maWcgIT09IHVuZGVmaW5lZCkge1xuICAgIHdhcnBzcGVlZC51cGRhdGUoY29uZmlnKVxuICB9XG5cbiAgaWYgKHBhdXNlICE9PSB1bmRlZmluZWQpIHtcbiAgICBwYXVzZWQgPSBwYXVzZVxuICAgIGlmICghcGF1c2VkKSB7XG4gICAgICBsYXN0VGltZSA9IG51bGxcbiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aWNrKVxuICAgIH1cbiAgfVxufVxuIl0sIm5hbWVzIjpbIlN0YXIiLCJbb2JqZWN0IE9iamVjdF0iLCJ4IiwieSIsInoiLCJ0aGlzIiwic2l6ZSIsIk1hdGgiLCJyYW5kb20iLCJyYW5kUG9zIiwiV2FycFNwZWVkIiwiY2FudmFzIiwiY3R4IiwiZ2V0Q29udGV4dCIsImNvbmZpZyIsImtleSIsInZhbHVlIiwiT2JqZWN0IiwiZW50cmllcyIsInNwZWVkIiwic3RhclNjYWxlIiwibWF4TGluZVdpZHRoIiwicmVzb2x1dGlvbiIsInN0YXJDb3VudCIsImNlaWwiLCJkaWZmIiwic3RhcnMiLCJsZW5ndGgiLCJpIiwic3RhciIsInB1c2giLCJjb2xvciIsIndlYkNvbG9yIiwiY2hhckF0IiwiciIsInBhcnNlSW50Iiwic3Vic3RyIiwiZyIsImIiLCJzdGFyUiIsInN0YXJHIiwic3RhckIiLCJ0aW1lRGVsdGEiLCJtb3ZlIiwid2lkdGgiLCJoZWlnaHQiLCJtYXgiLCJmaWxsU3R5bGUiLCJiYWNrZ3JvdW5kQ29sb3IiLCJmaWxsUmVjdCIsInMiLCJ4T25EaXNwbGF5IiwieU9uRGlzcGxheSIsIndhcnBFZmZlY3QiLCJkZXB0aEFscGhhIiwiYWxwaGEiLCJ0b1N0cmluZyIsInN0YXJDb2xvciIsImJlZ2luUGF0aCIsIngyT25EaXNwbGF5Iiwid2FycEVmZmVjdExlbmd0aCIsInkyT25EaXNwbGF5IiwibW92ZVRvIiwibGluZVRvIiwibGluZVdpZHRoIiwibWluIiwibGluZUNhcCIsInVzZUNpcmNsZXMiLCJzdHJva2VTdHlsZSIsInN0cm9rZSIsImFyYyIsIlBJIiwiZmlsbCIsInNwZWVkTXVsRiIsInNwZWVkQWRqRiIsInBvdyIsInNwZWVkQWRqRmFjdG9yIiwidGFyZ2V0U3BlZWQiLCJ3YXJwc3BlZWQiLCJsYXN0VGltZSIsInBhdXNlZCIsInRpY2siLCJ0aW1lIiwiZHJhdyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm9ubWVzc2FnZSIsImRhdGEiLCJwYXVzZSIsInVuZGVmaW5lZCIsInVwZGF0ZSJdLCJtYXBwaW5ncyI6InlCQUFBLE1BQU1BLEVBQ0pDLFlBQVlDLEVBQUdDLEVBQUdDLEdBQ2hCQyxLQUFLSCxFQUFJQSxFQUNURyxLQUFLRixFQUFJQSxFQUNURSxLQUFLRCxFQUFJQSxFQUNUQyxLQUFLQyxLQUFPLEdBQU1DLEtBQUtDLFVBSTNCLE1BQU1DLEVBQVUsSUFBOEIsS0FBdkJGLEtBQUtDLFNBQVcsSUFleEIsTUFBTUUsRUFDbkJULE9BQVMsR0FDVEEsTUFBUSxHQUVSQSxNQUFRLElBQ1JBLE1BQVEsSUFDUkEsTUFBUSxJQUVSQSxZQUFZVSxHQUNWTixLQUFLTSxPQUFTQSxFQUNkTixLQUFLTyxJQUFNUCxLQUFLTSxPQUFPRSxXQUFXLE1BR3BDWixPQUFPYSxHQUVMLElBQUssTUFBT0MsRUFBS0MsS0FBVUMsT0FBT0MsUUFBUUosR0FDeEMsR0FBSVQsS0FBS1MsT0FBT0MsS0FBU0MsRUFBTyxDQUM5QixPQUFRRCxHQUNOLElBQUssUUFDTCxJQUFLLGNBQ0wsSUFBSyxpQkFDSFYsS0FBS2MsTUFBUUwsRUFBT0ssT0FBU2QsS0FBS1MsT0FBT0ssTUFDekMsTUFDRixJQUFLLGNBQ0NMLEVBQU9NLFdBQWFmLEtBQUtTLE9BQU9NLGFBQ2xDZixLQUFLQyxLQUFPVSxHQUFTLElBQU1GLEVBQU9NLFdBQWFmLEtBQUtTLE9BQU9NLFlBQzNEZixLQUFLZ0IsYUFBZWhCLEtBQUtDLEtBQU8sSUFFbEMsTUFDRixJQUFLLGFBQ0NRLEVBQU9R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",c=!1,function(I){return C=C||F(U,B,c),new Worker(C,I)});AFRAME.registerComponent("warpspeed",{schema:{resolution:{type:"number",default:512},speed:{type:"number",default:.7},targetSpeed:{type:"number",default:.7},speedAdjFactor:{type:"number",default:.03},density:{type:"number",default:.7},useCircles:{type:"boolean",default:!0},depthAlpha:{type:"boolean",default:!0},warpEffect:{type:"boolean",default:!0},warpEffectLength:{type:"number",default:5},starScale:{type:"number",default:3},backgroundColor:{type:"color",default:"#100a1a"},starColor:{type:"color",default:"#ffffff"},useWorker:{type:"boolean",default:!1}},update(I){if(I.useWorker!==this.data.useWorker)if(void 0!==I.useWorker&&(I.useWorker?(this.worker.terminate(),delete this.worker):delete this.warpspeed,this.canvasMap.dispose(),delete this.canvas),this.canvas=document.createElement("canvas"),this.canvas.width=this.data.resolution,this.canvas.height=this.data.resolution,this.canvasMap=new THREE.Texture(this.canvas),this.el.getObject3D("mesh").material.map=this.canvasMap,this.data.useWorker){const I=this.canvas.transferControlToOffscreen();this.worker=new Q,this.worker.postMessage({canvas:I},[I])}else this.warpspeed=new s(this.canvas);this.data.useWorker?this.worker.postMessage({config:this.data,pause:!this.isPlaying}):this.warpspeed.update(this.data)},play(){this.data.useWorker&&this.worker.postMessage({pause:!1})},pause(){this.data.useWorker&&this.worker.postMessage({pause:!0})},tick(I,g){this.data.useWorker||this.warpspeed.draw(g),this.canvasMap.needsUpdate=!0}});
