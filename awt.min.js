class I{constructor(I,g,s){this.x=I,this.y=g,this.z=s,this.size=.5+Math.random()}}const g=()=>1e3*(Math.random()-.5);class s{config={};stars=[];constructor(I){this.canvas=I,this.ctx=this.canvas.getContext("2d")}update(s){for(const[U,F]of Object.entries(s))if(this.config[U]!==F){switch(U){case"speed":case"targetSpeed":case"speedAdjFactor":this.speed=s.speed||this.config.speed;break;case"resolution":(s.starScale||this.config.starScale)&&(this.size=F/(10/(s.starScale||this.config.starScale)),this.maxLineWidth=this.size/30);break;case"starScale":(s.resolution||this.config.resolution)&&(this.size=(s.resolution||this.config.resolution)/(10/F),this.maxLineWidth=this.size/30);break;case"density":const U=Math.ceil(1e3*F),C=U-this.stars.length;if(C>0)for(let s=0;s<C;s++){const s=new I(g(),g(),1e3*Math.random());this.stars.push(s)}else this.stars.length=U;break;case"starColor":const c="#"===(Q=F).charAt(0)&&7===Q.length?{r:parseInt(Q.substr(1,2),16),g:parseInt(Q.substr(3,2),16),b:parseInt(Q.substr(5,2),16)}:{r:255,g:255,b:255};this.starR=c.r,this.starG=c.g,this.starB=c.b}this.config[U]=F}var Q}draw(I){this.move(I);const g=this.config.resolution,s=this.config.resolution;this.size=Math.max(g,s)/(10/this.config.starScale);const Q=this.ctx;Q.fillStyle=this.config.backgroundColor,Q.fillRect(0,0,g,s);for(const I of this.stars){const U=I.x/I.z,F=I.y/I.z;if(!this.config.warpEffect&&(U<-.5||U>.5||F<-.5||F>.5))continue;const C=I.size*this.size/I.z;if(!(C<.3)){if(this.config.depthAlpha){const g=(1e3-I.z)/1e3;Q.fillStyle=`rgba(${this.starR}, ${this.starG}, ${this.starB}, ${g.toString()})`}else Q.fillStyle=this.config.starColor;if(this.config.warpEffect){Q.beginPath();const c=I.x/(I.z+this.config.warpEffectLength*this.speed),B=I.y/(I.z+this.config.warpEffectLength*this.speed);if(c<-.5||c>.5||B<-.5||B>.5)continue;Q.moveTo(g*(U+.5)-C/2,s*(F+.5)-C/2),Q.lineTo(g*(c+.5)-C/2,s*(B+.5)-C/2),Q.lineWidth=Math.min(C,this.maxLineWidth),Q.lineCap=this.config.useCircles?"round":"butt",Q.strokeStyle=Q.fillStyle,Q.stroke()}else this.config.useCircles?(Q.beginPath(),Q.arc(g*(U+.5)-C/2,s*(F+.5)-C/2,C/2,0,2*Math.PI),Q.fill()):Q.fillRect(g*(U+.5)-C/2,s*(F+.5)-C/2,C,C)}}}move(I){const g=I/10,s=Math.pow(this.config.speedAdjFactor,1/g);this.speed=this.config.targetSpeed*s+this.speed*(1-s),this.speed<0&&(this.speed=0);const Q=this.speed*g;for(const I of this.stars)for(I.z-=Q;I.z<1;)I.z+=1e3,I.x=(Math.random()-.5)*I.z,I.y=(Math.random()-.5)*I.z}}function Q(I,g,s){var Q=void 0===g?null:g,U=function(I,g){var s=atob(I);if(g){for(var Q=new Uint8Array(s.length),U=0,F=s.length;U<F;++U)Q[U]=s.charCodeAt(U);return String.fromCharCode.apply(null,new Uint16Array(Q.buffer))}return s}(I,void 0!==s&&s),F=U.indexOf("\n",10)+1,C=U.substring(F)+(Q?"//# sourceMappingURL="+Q:""),c=new Blob([C],{type:"application/javascript"});return URL.createObjectURL(c)}var U,F,C,c,B=(U="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Y2xhc3MgdHtjb25zdHJ1Y3Rvcih0LHMsaSl7dGhpcy54PXQsdGhpcy55PXMsdGhpcy56PWksdGhpcy5zaXplPS41K01hdGgucmFuZG9tKCl9fWNvbnN0IHM9KCk9PjFlMyooTWF0aC5yYW5kb20oKS0uNSk7Y2xhc3MgaXtjb25maWc9e307c3RhcnM9W107Y29uc3RydWN0b3IodCl7dGhpcy5jYW52YXM9dCx0aGlzLmN0eD10aGlzLmNhbnZhcy5nZXRDb250ZXh0KCIyZCIpfXVwZGF0ZShpKXtmb3IoY29uc3RbbyxhXW9mIE9iamVjdC5lbnRyaWVzKGkpKWlmKHRoaXMuY29uZmlnW29dIT09YSl7c3dpdGNoKG8pe2Nhc2Uic3BlZWQiOmNhc2UidGFyZ2V0U3BlZWQiOmNhc2Uic3BlZWRBZGpGYWN0b3IiOnRoaXMuc3BlZWQ9aS5zcGVlZHx8dGhpcy5jb25maWcuc3BlZWQ7YnJlYWs7Y2FzZSJyZXNvbHV0aW9uIjooaS5zdGFyU2NhbGV8fHRoaXMuY29uZmlnLnN0YXJTY2FsZSkmJih0aGlzLnNpemU9YS8oMTAvKGkuc3RhclNjYWxlfHx0aGlzLmNvbmZpZy5zdGFyU2NhbGUpKSx0aGlzLm1heExpbmVXaWR0aD10aGlzLnNpemUvMzApO2JyZWFrO2Nhc2Uic3RhclNjYWxlIjooaS5yZXNvbHV0aW9ufHx0aGlzLmNvbmZpZy5yZXNvbHV0aW9uKSYmKHRoaXMuc2l6ZT0oaS5yZXNvbHV0aW9ufHx0aGlzLmNvbmZpZy5yZXNvbHV0aW9uKS8oMTAvYSksdGhpcy5tYXhMaW5lV2lkdGg9dGhpcy5zaXplLzMwKTticmVhaztjYXNlImRlbnNpdHkiOmNvbnN0IG89TWF0aC5jZWlsKDFlMyphKSxuPW8tdGhpcy5zdGFycy5sZW5ndGg7aWYobj4wKWZvcihsZXQgaT0wO2k8bjtpKyspe2NvbnN0IGk9bmV3IHQocygpLHMoKSwxZTMqTWF0aC5yYW5kb20oKSk7dGhpcy5zdGFycy5wdXNoKGkpfWVsc2UgdGhpcy5zdGFycy5sZW5ndGg9bzticmVhaztjYXNlInN0YXJDb2xvciI6Y29uc3QgaD0iIyI9PT0oZT1hKS5jaGFyQXQoMCkmJjc9PT1lLmxlbmd0aD97cjpwYXJzZUludChlLnN1YnN0cigxLDIpLDE2KSxnOnBhcnNlSW50KGUuc3Vic3RyKDMsMiksMTYpLGI6cGFyc2VJbnQoZS5zdWJzdHIoNSwyKSwxNil9OntyOjI1NSxnOjI1NSxiOjI1NX07dGhpcy5zdGFyUj1oLnIsdGhpcy5zdGFyRz1oLmcsdGhpcy5zdGFyQj1oLmJ9dGhpcy5jb25maWdbb109YX12YXIgZX1kcmF3KHQpe3RoaXMubW92ZSh0KTtjb25zdCBzPXRoaXMuY29uZmlnLnJlc29sdXRpb24saT10aGlzLmNvbmZpZy5yZXNvbHV0aW9uO3RoaXMuc2l6ZT1NYXRoLm1heChzLGkpLygxMC90aGlzLmNvbmZpZy5zdGFyU2NhbGUpO2NvbnN0IGU9dGhpcy5jdHg7ZS5maWxsU3R5bGU9dGhpcy5jb25maWcuYmFja2dyb3VuZENvbG9yLGUuZmlsbFJlY3QoMCwwLHMsaSk7Zm9yKGNvbnN0IHQgb2YgdGhpcy5zdGFycyl7Y29uc3Qgbz10LngvdC56LGE9dC55L3QuejtpZighdGhpcy5jb25maWcud2FycEVmZmVjdCYmKG88LS41fHxvPi41fHxhPC0uNXx8YT4uNSkpY29udGludWU7Y29uc3Qgbj10LnNpemUqdGhpcy5zaXplL3QuejtpZighKG48LjMpKXtpZih0aGlzLmNvbmZpZy5kZXB0aEFscGhhKXtjb25zdCBzPSgxZTMtdC56KS8xZTM7ZS5maWxsU3R5bGU9YHJnYmEoJHt0aGlzLnN0YXJSfSwgJHt0aGlzLnN0YXJHfSwgJHt0aGlzLnN0YXJCfSwgJHtzLnRvU3RyaW5nKCl9KWB9ZWxzZSBlLmZpbGxTdHlsZT10aGlzLmNvbmZpZy5zdGFyQ29sb3I7aWYodGhpcy5jb25maWcud2FycEVmZmVjdCl7ZS5iZWdpblBhdGgoKTtjb25zdCBoPXQueC8odC56K3RoaXMuY29uZmlnLndhcnBFZmZlY3RMZW5ndGgqdGhpcy5zcGVlZCkscj10LnkvKHQueit0aGlzLmNvbmZpZy53YXJwRWZmZWN0TGVuZ3RoKnRoaXMuc3BlZWQpO2lmKGg8LS41fHxoPi41fHxyPC0uNXx8cj4uNSljb250aW51ZTtlLm1vdmVUbyhzKihvKy41KS1uLzIsaSooYSsuNSktbi8yKSxlLmxpbmVUbyhzKihoKy41KS1uLzIsaSoocisuNSktbi8yKSxlLmxpbmVXaWR0aD1NYXRoLm1pbihuLHRoaXMubWF4TGluZVdpZHRoKSxlLmxpbmVDYXA9dGhpcy5jb25maWcudXNlQ2lyY2xlcz8icm91bmQiOiJidXR0IixlLnN0cm9rZVN0eWxlPWUuZmlsbFN0eWxlLGUuc3Ryb2tlKCl9ZWxzZSB0aGlzLmNvbmZpZy51c2VDaXJjbGVzPyhlLmJlZ2luUGF0aCgpLGUuYXJjKHMqKG8rLjUpLW4vMixpKihhKy41KS1uLzIsbi8yLDAsMipNYXRoLlBJKSxlLmZpbGwoKSk6ZS5maWxsUmVjdChzKihvKy41KS1uLzIsaSooYSsuNSktbi8yLG4sbil9fX1tb3ZlKHQpe2NvbnN0IHM9dC8xMCxpPU1hdGgucG93KHRoaXMuY29uZmlnLnNwZWVkQWRqRmFjdG9yLDEvcyk7dGhpcy5zcGVlZD10aGlzLmNvbmZpZy50YXJnZXRTcGVlZCppK3RoaXMuc3BlZWQqKDEtaSksdGhpcy5zcGVlZDwwJiYodGhpcy5zcGVlZD0wKTtjb25zdCBlPXRoaXMuc3BlZWQqcztmb3IoY29uc3QgdCBvZiB0aGlzLnN0YXJzKWZvcih0LnotPWU7dC56PDE7KXQueis9MWUzLHQueD0oTWF0aC5yYW5kb20oKS0uNSkqdC56LHQueT0oTWF0aC5yYW5kb20oKS0uNSkqdC56fX1sZXQgZSxvLGE7Y29uc3Qgbj10PT57YXx8KGUuZHJhdyhudWxsPT09bz8xOnQtbyksbz10LHJlcXVlc3RBbmltYXRpb25GcmFtZShuKSl9O29ubWVzc2FnZT0oe2RhdGE6e2NhbnZhczp0LGNvbmZpZzpzLHBhdXNlOmh9fSk9Pnt2b2lkIDAhPT10JiYoZT1uZXcgaSh0KSksdm9pZCAwIT09cyYmZS51cGRhdGUocyksdm9pZCAwIT09aCYmKGE9aCxhfHwobz1udWxsLHJlcXVlc3RBbmltYXRpb25GcmFtZShuKSkpfX0oKTsKCg==",F="data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid29ya2VyLmpzIiwic291cmNlcyI6WyJ3b3JrZXI6L0M6XFx3ZWItd29ya2VyXFx3YXJwc3BlZWQuanMiLCJ3b3JrZXI6L0M6XFx3ZWItd29ya2VyXFx3b3JrZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgU3RhciB7XG4gIGNvbnN0cnVjdG9yKHgsIHksIHopIHtcbiAgICB0aGlzLnggPSB4XG4gICAgdGhpcy55ID0geVxuICAgIHRoaXMueiA9IHpcbiAgICB0aGlzLnNpemUgPSAwLjUgKyBNYXRoLnJhbmRvbSgpXG4gIH1cbn1cblxuY29uc3QgcmFuZFBvcyA9ICgpID0+IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDEwMDBcblxuY29uc3QgaGV4MnJnYiA9IHdlYkNvbG9yID0+XG4gIHdlYkNvbG9yLmNoYXJBdCgwKSA9PT0gXCIjXCIgJiYgd2ViQ29sb3IubGVuZ3RoID09PSA3XG4gICAgPyB7XG4gICAgICAgIHI6IHBhcnNlSW50KHdlYkNvbG9yLnN1YnN0cigxLCAyKSwgMTYpLFxuICAgICAgICBnOiBwYXJzZUludCh3ZWJDb2xvci5zdWJzdHIoMywgMiksIDE2KSxcbiAgICAgICAgYjogcGFyc2VJbnQod2ViQ29sb3Iuc3Vic3RyKDUsIDIpLCAxNiksXG4gICAgICB9XG4gICAgOiB7XG4gICAgICAgIHI6IDI1NSxcbiAgICAgICAgZzogMjU1LFxuICAgICAgICBiOiAyNTUsXG4gICAgICB9XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdhcnBTcGVlZCB7XG4gIGNvbmZpZyA9IHt9XG4gIHN0YXJzID0gW11cblxuICBjb25zdHJ1Y3RvcihjYW52YXMpIHtcbiAgICB0aGlzLmNhbnZhcyA9IGNhbnZhc1xuICAgIHRoaXMuY3R4ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpXG4gIH1cblxuICB1cGRhdGUoY29uZmlnKSB7XG4gICAgLy9MaWxpQ29kZTogbiB2dnZ2dnZ2dnZ2dnZ2dnZ2dnZqIG4gbiBuIG5cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhjb25maWcpKSB7XG4gICAgICBpZiAodGhpcy5jb25maWdba2V5XSAhPT0gdmFsdWUpIHtcbiAgICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgICBjYXNlIFwic3BlZWRcIjpcbiAgICAgICAgICBjYXNlIFwidGFyZ2V0U3BlZWRcIjpcbiAgICAgICAgICBjYXNlIFwic3BlZWRBZGpGYWN0b3JcIjpcbiAgICAgICAgICAgIHRoaXMuc3BlZWQgPSBjb25maWcuc3BlZWQgfHwgdGhpcy5jb25maWcuc3BlZWRcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSBcInJlc29sdXRpb25cIjpcbiAgICAgICAgICAgIGlmIChjb25maWcuc3RhclNjYWxlIHx8IHRoaXMuY29uZmlnLnN0YXJTY2FsZSkge1xuICAgICAgICAgICAgICB0aGlzLnNpemUgPSB2YWx1ZSAvICgxMCAvIChjb25maWcuc3RhclNjYWxlIHx8IHRoaXMuY29uZmlnLnN0YXJTY2FsZSkpXG4gICAgICAgICAgICAgIHRoaXMubWF4TGluZVdpZHRoID0gdGhpcy5zaXplIC8gMzBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSBcInN0YXJTY2FsZVwiOlxuICAgICAgICAgICAgaWYgKGNvbmZpZy5yZXNvbHV0aW9uIHx8IHRoaXMuY29uZmlnLnJlc29sdXRpb24pIHtcbiAgICAgICAgICAgICAgdGhpcy5zaXplID0gKGNvbmZpZy5yZXNvbHV0aW9uIHx8IHRoaXMuY29uZmlnLnJlc29sdXRpb24pIC8gKDEwIC8gdmFsdWUpXG4gICAgICAgICAgICAgIHRoaXMubWF4TGluZVdpZHRoID0gdGhpcy5zaXplIC8gMzBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSBcImRlbnNpdHlcIjpcbiAgICAgICAgICAgIGNvbnN0IHN0YXJDb3VudCA9IE1hdGguY2VpbCh2YWx1ZSAqIDEwMDApXG4gICAgICAgICAgICBjb25zdCBkaWZmID0gc3RhckNvdW50IC0gdGhpcy5zdGFycy5sZW5ndGhcbiAgICAgICAgICAgIGlmIChkaWZmID4gMCkge1xuICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRpZmY7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXIgPSBuZXcgU3RhcihyYW5kUG9zKCksIHJhbmRQb3MoKSwgMTAwMCAqIE1hdGgucmFuZG9tKCkpXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFycy5wdXNoKHN0YXIpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMuc3RhcnMubGVuZ3RoID0gc3RhckNvdW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgXCJzdGFyQ29sb3JcIjpcbiAgICAgICAgICAgIGNvbnN0IGNvbG9yID0gaGV4MnJnYih2YWx1ZSlcbiAgICAgICAgICAgIHRoaXMuc3RhclIgPSBjb2xvci5yXG4gICAgICAgICAgICB0aGlzLnN0YXJHID0gY29sb3IuZ1xuICAgICAgICAgICAgdGhpcy5zdGFyQiA9IGNvbG9yLmJcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb25maWdba2V5XSA9IHZhbHVlXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZHJhdyh0aW1lRGVsdGEpIHtcbiAgICAvLyBjb25zb2xlLmxvZyh0aW1lRGVsdGEpXG4gICAgdGhpcy5tb3ZlKHRpbWVEZWx0YSlcblxuICAgIGNvbnN0IHdpZHRoID0gdGhpcy5jb25maWcucmVzb2x1dGlvblxuICAgIGNvbnN0IGhlaWdodCA9IHRoaXMuY29uZmlnLnJlc29sdXRpb25cbiAgICB0aGlzLnNpemUgPSBNYXRoLm1heCh3aWR0aCwgaGVpZ2h0KSAvICgxMCAvIHRoaXMuY29uZmlnLnN0YXJTY2FsZSlcblxuICAgIGNvbnN0IGN0eCA9IHRoaXMuY3R4XG4gICAgY3R4LmZpbGxTdHlsZSA9IHRoaXMuY29uZmlnLmJhY2tncm91bmRDb2xvclxuICAgIGN0eC5maWxsUmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KVxuXG4gICAgZm9yIChjb25zdCBzIG9mIHRoaXMuc3RhcnMpIHtcbiAgICAgIGNvbnN0IHhPbkRpc3BsYXkgPSBzLnggLyBzLnpcbiAgICAgIGNvbnN0IHlPbkRpc3BsYXkgPSBzLnkgLyBzLnpcblxuICAgICAgaWYgKCF0aGlzLmNvbmZpZy53YXJwRWZmZWN0ICYmICh4T25EaXNwbGF5IDwgLTAuNSB8fCB4T25EaXNwbGF5ID4gMC41IHx8IHlPbkRpc3BsYXkgPCAtMC41IHx8IHlPbkRpc3BsYXkgPiAwLjUpKVxuICAgICAgICBjb250aW51ZVxuXG4gICAgICBjb25zdCBzaXplID0gKHMuc2l6ZSAqIHRoaXMuc2l6ZSkgLyBzLnpcbiAgICAgIGlmIChzaXplIDwgMC4zKSBjb250aW51ZSAvL2Rvbid0IGRyYXcgdmVyeSBzbWFsbCBkb3RzXG5cbiAgICAgIGlmICh0aGlzLmNvbmZpZy5kZXB0aEFscGhhKSB7XG4gICAgICAgIGNvbnN0IGFscGhhID0gKDEwMDAgLSBzLnopIC8gMTAwMFxuICAgICAgICBjdHguZmlsbFN0eWxlID0gYHJnYmEoJHt0aGlzLnN0YXJSfSwgJHt0aGlzLnN0YXJHfSwgJHt0aGlzLnN0YXJCfSwgJHthbHBoYS50b1N0cmluZygpfSlgXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdHguZmlsbFN0eWxlID0gdGhpcy5jb25maWcuc3RhckNvbG9yXG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmNvbmZpZy53YXJwRWZmZWN0KSB7XG4gICAgICAgIGN0eC5iZWdpblBhdGgoKVxuICAgICAgICBjb25zdCB4Mk9uRGlzcGxheSA9IHMueCAvIChzLnogKyB0aGlzLmNvbmZpZy53YXJwRWZmZWN0TGVuZ3RoICogdGhpcy5zcGVlZClcbiAgICAgICAgY29uc3QgeTJPbkRpc3BsYXkgPSBzLnkgLyAocy56ICsgdGhpcy5jb25maWcud2FycEVmZmVjdExlbmd0aCAqIHRoaXMuc3BlZWQpXG5cbiAgICAgICAgaWYgKHgyT25EaXNwbGF5IDwgLTAuNSB8fCB4Mk9uRGlzcGxheSA+IDAuNSB8fCB5Mk9uRGlzcGxheSA8IC0wLjUgfHwgeTJPbkRpc3BsYXkgPiAwLjUpIGNvbnRpbnVlXG5cbiAgICAgICAgY3R4Lm1vdmVUbyh3aWR0aCAqICh4T25EaXNwbGF5ICsgMC41KSAtIHNpemUgLyAyLCBoZWlnaHQgKiAoeU9uRGlzcGxheSArIDAuNSkgLSBzaXplIC8gMilcbiAgICAgICAgY3R4LmxpbmVUbyh3aWR0aCAqICh4Mk9uRGlzcGxheSArIDAuNSkgLSBzaXplIC8gMiwgaGVpZ2h0ICogKHkyT25EaXNwbGF5ICsgMC41KSAtIHNpemUgLyAyKVxuICAgICAgICBjdHgubGluZVdpZHRoID0gTWF0aC5taW4oc2l6ZSwgdGhpcy5tYXhMaW5lV2lkdGgpXG4gICAgICAgIGN0eC5saW5lQ2FwID0gdGhpcy5jb25maWcudXNlQ2lyY2xlcyA/IFwicm91bmRcIiA6IFwiYnV0dFwiXG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IGN0eC5maWxsU3R5bGVcbiAgICAgICAgY3R4LnN0cm9rZSgpXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuY29uZmlnLnVzZUNpcmNsZXMpIHtcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpXG4gICAgICAgIGN0eC5hcmMod2lkdGggKiAoeE9uRGlzcGxheSArIDAuNSkgLSBzaXplIC8gMiwgaGVpZ2h0ICogKHlPbkRpc3BsYXkgKyAwLjUpIC0gc2l6ZSAvIDIsIHNpemUgLyAyLCAwLCAyICogTWF0aC5QSSlcbiAgICAgICAgY3R4LmZpbGwoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3R4LmZpbGxSZWN0KHdpZHRoICogKHhPbkRpc3BsYXkgKyAwLjUpIC0gc2l6ZSAvIDIsIGhlaWdodCAqICh5T25EaXNwbGF5ICsgMC41KSAtIHNpemUgLyAyLCBzaXplLCBzaXplKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIG1vdmUodGltZURlbHRhKSB7XG4gICAgY29uc3Qgc3BlZWRNdWxGID0gdGltZURlbHRhIC8gMTAgLy8gLyAxNi41XG4gICAgY29uc3Qgc3BlZWRBZGpGID0gTWF0aC5wb3codGhpcy5jb25maWcuc3BlZWRBZGpGYWN0b3IsIDEgLyBzcGVlZE11bEYpXG4gICAgdGhpcy5zcGVlZCA9IHRoaXMuY29uZmlnLnRhcmdldFNwZWVkICogc3BlZWRBZGpGICsgdGhpcy5zcGVlZCAqICgxIC0gc3BlZWRBZGpGKVxuICAgIGlmICh0aGlzLnNwZWVkIDwgMCkgdGhpcy5zcGVlZCA9IDBcbiAgICBjb25zdCBzcGVlZCA9IHRoaXMuc3BlZWQgKiBzcGVlZE11bEZcblxuICAgIGZvciAoY29uc3Qgc3RhciBvZiB0aGlzLnN0YXJzKSB7XG4gICAgICBzdGFyLnogLT0gc3BlZWRcbiAgICAgIHdoaWxlIChzdGFyLnogPCAxKSB7XG4gICAgICAgIHN0YXIueiArPSAxMDAwXG4gICAgICAgIHN0YXIueCA9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIHN0YXIuelxuICAgICAgICBzdGFyLnkgPSAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiBzdGFyLnpcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCBXYXJwU3BlZWQgZnJvbSBcIi4vd2FycHNwZWVkXCJcblxubGV0IHdhcnBzcGVlZFxubGV0IGxhc3RUaW1lXG5sZXQgcGF1c2VkXG5cbmNvbnN0IHRpY2sgPSB0aW1lID0+IHtcbiAgaWYgKHBhdXNlZCkgcmV0dXJuXG4gIHdhcnBzcGVlZC5kcmF3KGxhc3RUaW1lID09PSBudWxsID8gMSA6IHRpbWUgLSBsYXN0VGltZSlcbiAgbGFzdFRpbWUgPSB0aW1lXG4gIHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aWNrKVxufVxuXG5vbm1lc3NhZ2UgPSAoeyBkYXRhOiB7IGNhbnZhcywgY29uZmlnLCBwYXVzZSB9IH0pID0+IHtcbiAgaWYgKGNhbnZhcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgd2FycHNwZWVkID0gbmV3IFdhcnBTcGVlZChjYW52YXMpXG4gIH1cblxuICBpZiAoY29uZmlnICE9PSB1bmRlZmluZWQpIHtcbiAgICB3YXJwc3BlZWQudXBkYXRlKGNvbmZpZylcbiAgfVxuXG4gIGlmIChwYXVzZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcGF1c2VkID0gcGF1c2VcbiAgICBpZiAoIXBhdXNlZCkge1xuICAgICAgbGFzdFRpbWUgPSBudWxsXG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGljaylcbiAgICB9XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJTdGFyIiwiW29iamVjdCBPYmplY3RdIiwieCIsInkiLCJ6IiwidGhpcyIsInNpemUiLCJNYXRoIiwicmFuZG9tIiwicmFuZFBvcyIsIldhcnBTcGVlZCIsImNhbnZhcyIsImN0eCIsImdldENvbnRleHQiLCJjb25maWciLCJrZXkiLCJ2YWx1ZSIsIk9iamVjdCIsImVudHJpZXMiLCJzcGVlZCIsInN0YXJTY2FsZSIsIm1heExpbmVXaWR0aCIsInJlc29sdXRpb24iLCJzdGFyQ291bnQiLCJjZWlsIiwiZGlmZiIsInN0YXJzIiwibGVuZ3RoIiwiaSIsInN0YXIiLCJwdXNoIiwiY29sb3IiLCJ3ZWJDb2xvciIsImNoYXJBdCIsInIiLCJwYXJzZUludCIsInN1YnN0ciIsImciLCJiIiwic3RhclIiLCJzdGFyRyIsInN0YXJCIiwidGltZURlbHRhIiwibW92ZSIsIndpZHRoIiwiaGVpZ2h0IiwibWF4IiwiZmlsbFN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwiZmlsbFJlY3QiLCJzIiwieE9uRGlzcGxheSIsInlPbkRpc3BsYXkiLCJ3YXJwRWZmZWN0IiwiZGVwdGhBbHBoYSIsImFscGhhIiwidG9TdHJpbmciLCJzdGFyQ29sb3IiLCJiZWdpblBhdGgiLCJ4Mk9uRGlzcGxheSIsIndhcnBFZmZlY3RMZW5ndGgiLCJ5Mk9uRGlzcGxheSIsIm1vdmVUbyIsImxpbmVUbyIsImxpbmVXaWR0aCIsIm1pbiIsImxpbmVDYXAiLCJ1c2VDaXJjbGVzIiwic3Ryb2tlU3R5bGUiLCJzdHJva2UiLCJhcmMiLCJQSSIsImZpbGwiLCJzcGVlZE11bEYiLCJzcGVlZEFkakYiLCJwb3ciLCJzcGVlZEFkakZhY3RvciIsInRhcmdldFNwZWVkIiwid2FycHNwZWVkIiwibGFzdFRpbWUiLCJwYXVzZWQiLCJ0aWNrIiwidGltZSIsImRyYXciLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJvbm1lc3NhZ2UiLCJkYXRhIiwicGF1c2UiLCJ1bmRlZmluZWQiLCJ1cGRhdGUiXSwibWFwcGluZ3MiOiJ5QkFBQSxNQUFNQSxFQUNKQyxZQUFZQyxFQUFHQyxFQUFHQyxHQUNoQkMsS0FBS0gsRUFBSUEsRUFDVEcsS0FBS0YsRUFBSUEsRUFDVEUsS0FBS0QsRUFBSUEsRUFDVEMsS0FBS0MsS0FBTyxHQUFNQyxLQUFLQyxVQUkzQixNQUFNQyxFQUFVLElBQThCLEtBQXZCRixLQUFLQyxTQUFXLElBZXhCLE1BQU1FLEVBQ25CVCxPQUFTLEdBQ1RBLE1BQVEsR0FFUkEsWUFBWVUsR0FDVk4sS0FBS00sT0FBU0EsRUFDZE4sS0FBS08sSUFBTVAsS0FBS00sT0FBT0UsV0FBVyxNQUdwQ1osT0FBT2EsR0FFTCxJQUFLLE1BQU9DLEVBQUtDLEtBQVVDLE9BQU9DLFFBQVFKLEdBQ3hDLEdBQUlULEtBQUtTLE9BQU9DLEtBQVNDLEVBQU8sQ0FDOUIsT0FBUUQsR0FDTixJQUFLLFFBQ0wsSUFBSyxjQUNMLElBQUssaUJBQ0hWLEtBQUtjLE1BQVFMLEVBQU9LLE9BQVNkLEtBQUtTLE9BQU9LLE1BQ3pDLE1BQ0YsSUFBSyxjQUNDTCxFQUFPTSxXQUFhZixLQUFLUyxPQUFPTSxhQUNsQ2YsS0FBS0MsS0FBT1UsR0FBUyxJQUFNRixFQUFPTSxXQUFhZixLQUFLUyxPQUFPTSxZQUMzRGYsS0FBS2dCLGFBQWVoQixLQUFLQyxLQUFPLElBRWxDLE1BQ0YsSUFBSyxhQUNDUSxFQUFPUSxZQUFjakIsS0FBS1MsT0FBT1EsY0FDbkNqQixLQUFLQyxNQUFRUSxFQUFPUSxZQUFjakIsS0FBS1MsT0FBT1EsYUFBZSxHQUFLTixHQUNs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",C=!1,function(I){return c=c||Q(U,F,C),new Worker(c,I)});AFRAME.registerComponent("warpspeed",{schema:{resolution:{type:"number",default:512},speed:{type:"number",default:.7},targetSpeed:{type:"number",default:.7},speedAdjFactor:{type:"number",default:.03},density:{type:"number",default:.7},useCircles:{type:"boolean",default:!0},depthAlpha:{type:"boolean",default:!0},warpEffect:{type:"boolean",default:!0},warpEffectLength:{type:"number",default:5},starScale:{type:"number",default:3},backgroundColor:{type:"color",default:"#100a1a"},starColor:{type:"color",default:"#ffffff"},useWorker:{type:"boolean",default:!1}},update(I){if(I.useWorker!==this.data.useWorker)if(void 0!==I.useWorker&&(I.useWorker?(this.worker.terminate(),delete this.worker):delete this.warpspeed,this.canvasMap.dispose(),delete this.canvas),this.canvas=document.createElement("canvas"),this.canvas.width=this.data.resolution,this.canvas.height=this.data.resolution,this.canvasMap=new THREE.Texture(this.canvas),this.el.getObject3D("mesh").material.map=this.canvasMap,this.data.useWorker){const I=this.canvas.transferControlToOffscreen();this.worker=new B,this.worker.postMessage({canvas:I},[I])}else this.warpspeed=new s(this.canvas);this.data.useWorker?this.worker.postMessage({config:this.data,pause:!this.isPlaying}):this.warpspeed.update(this.data)},play(){this.data.useWorker&&this.worker.postMessage({pause:!1})},pause(){this.data.useWorker&&this.worker.postMessage({pause:!0})},tick(I,g){this.data.useWorker||this.warpspeed.draw(g),this.canvasMap.needsUpdate=!0}});
