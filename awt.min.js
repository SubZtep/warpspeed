const I=()=>1e3*(Math.random()-.5);class g{constructor(I,g,s){this.x=I,this.y=g,this.z=s,this.size=.5+Math.random()}}class s{config={};stars=[];constructor(I){this.canvas=I,this.ctx=this.canvas.getContext("2d")}update(s){for(const[C,F]of Object.entries(s))if(this.config[C]!==F){switch(C){case"resolution":(s.starScale||this.config.starScale)&&(this.size=F/(10/(s.starScale||this.config.starScale)),this.maxLineWidth=this.size/30);break;case"starScale":(s.resolution||this.config.resolution)&&(this.size=(s.resolution||this.config.resolution)/(10/F),this.maxLineWidth=this.size/30);break;case"density":const C=Math.ceil(1e3*F),Q=C-this.stars.length;if(Q>0)for(let s=0;s<Q;s++){const s=new g(I(),I(),1e3*Math.random());this.stars.push(s)}else this.stars.length=C;break;case"starColor":const c="#"===(U=F).charAt(0)&&7===U.length?{r:parseInt(U.substr(1,2),16),g:parseInt(U.substr(3,2),16),b:parseInt(U.substr(5,2),16)}:{r:255,g:255,b:255};this.starR=c.r,this.starG=c.g,this.starB=c.b}this.config[C]=F}var U}draw(I){this.move(I);const g=this.config.resolution,s=this.config.resolution;this.size=Math.max(g,s)/(10/this.config.starScale);const U=this.ctx;U.fillStyle=this.config.backgroundColor,U.fillRect(0,0,g,s);for(const I of this.stars){const C=I.x/I.z,F=I.y/I.z;if(!this.config.warpEffect&&(C<-.5||C>.5||F<-.5||F>.5))continue;const Q=I.size*this.size/I.z;if(!(Q<.3)){if(this.config.depthAlpha){const g=(1e3-I.z)/1e3;U.fillStyle=`rgba(${this.starR}, ${this.starG}, ${this.starB}, ${g.toString()})`}else U.fillStyle=this.config.starColor;if(this.config.warpEffect){U.beginPath();const c=I.x/(I.z+this.config.warpEffectLength*this.config.speed),B=I.y/(I.z+this.config.warpEffectLength*this.config.speed);if(c<-.5||c>.5||B<-.5||B>.5)continue;U.moveTo(g*(C+.5)-Q/2,s*(F+.5)-Q/2),U.lineTo(g*(c+.5)-Q/2,s*(B+.5)-Q/2),U.lineWidth=Math.min(Q,this.maxLineWidth),U.lineCap=this.config.useCircles?"round":"butt",U.strokeStyle=U.fillStyle,U.stroke()}else this.config.useCircles?(U.beginPath(),U.arc(g*(C+.5)-Q/2,s*(F+.5)-Q/2,Q/2,0,2*Math.PI),U.fill()):U.fillRect(g*(C+.5)-Q/2,s*(F+.5)-Q/2,Q,Q)}}}move(I){const g=this.config.speed*(I/10);for(const I of this.stars)for(I.z-=g;I.z<1;)I.z+=1e3,I.x=(Math.random()-.5)*I.z,I.y=(Math.random()-.5)*I.z}}function U(I,g,s){var U=void 0===g?null:g,C=function(I,g){var s=atob(I);if(g){for(var U=new Uint8Array(s.length),C=0,F=s.length;C<F;++C)U[C]=s.charCodeAt(C);return String.fromCharCode.apply(null,new Uint16Array(U.buffer))}return s}(I,void 0!==s&&s),F=C.indexOf("\n",10)+1,Q=C.substring(F)+(U?"//# sourceMappingURL="+U:""),c=new Blob([Q],{type:"application/javascript"});return URL.createObjectURL(c)}var C,F,Q,c,B=(C="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Y29uc3QgdD0oKT0+MWUzKihNYXRoLnJhbmRvbSgpLS41KTtjbGFzcyBze2NvbnN0cnVjdG9yKHQscyxpKXt0aGlzLng9dCx0aGlzLnk9cyx0aGlzLno9aSx0aGlzLnNpemU9LjUrTWF0aC5yYW5kb20oKX19Y2xhc3MgaXtjb25maWc9e307c3RhcnM9W107Y29uc3RydWN0b3IodCl7dGhpcy5jYW52YXM9dCx0aGlzLmN0eD10aGlzLmNhbnZhcy5nZXRDb250ZXh0KCIyZCIpfXVwZGF0ZShpKXtmb3IoY29uc3RbbyxuXW9mIE9iamVjdC5lbnRyaWVzKGkpKWlmKHRoaXMuY29uZmlnW29dIT09bil7c3dpdGNoKG8pe2Nhc2UicmVzb2x1dGlvbiI6KGkuc3RhclNjYWxlfHx0aGlzLmNvbmZpZy5zdGFyU2NhbGUpJiYodGhpcy5zaXplPW4vKDEwLyhpLnN0YXJTY2FsZXx8dGhpcy5jb25maWcuc3RhclNjYWxlKSksdGhpcy5tYXhMaW5lV2lkdGg9dGhpcy5zaXplLzMwKTticmVhaztjYXNlInN0YXJTY2FsZSI6KGkucmVzb2x1dGlvbnx8dGhpcy5jb25maWcucmVzb2x1dGlvbikmJih0aGlzLnNpemU9KGkucmVzb2x1dGlvbnx8dGhpcy5jb25maWcucmVzb2x1dGlvbikvKDEwL24pLHRoaXMubWF4TGluZVdpZHRoPXRoaXMuc2l6ZS8zMCk7YnJlYWs7Y2FzZSJkZW5zaXR5Ijpjb25zdCBvPU1hdGguY2VpbCgxZTMqbiksYT1vLXRoaXMuc3RhcnMubGVuZ3RoO2lmKGE+MClmb3IobGV0IGk9MDtpPGE7aSsrKXtjb25zdCBpPW5ldyBzKHQoKSx0KCksMWUzKk1hdGgucmFuZG9tKCkpO3RoaXMuc3RhcnMucHVzaChpKX1lbHNlIHRoaXMuc3RhcnMubGVuZ3RoPW87YnJlYWs7Y2FzZSJzdGFyQ29sb3IiOmNvbnN0IHI9IiMiPT09KGU9bikuY2hhckF0KDApJiY3PT09ZS5sZW5ndGg/e3I6cGFyc2VJbnQoZS5zdWJzdHIoMSwyKSwxNiksZzpwYXJzZUludChlLnN1YnN0cigzLDIpLDE2KSxiOnBhcnNlSW50KGUuc3Vic3RyKDUsMiksMTYpfTp7cjoyNTUsZzoyNTUsYjoyNTV9O3RoaXMuc3RhclI9ci5yLHRoaXMuc3Rhckc9ci5nLHRoaXMuc3RhckI9ci5ifXRoaXMuY29uZmlnW29dPW59dmFyIGV9ZHJhdyh0KXt0aGlzLm1vdmUodCk7Y29uc3Qgcz10aGlzLmNvbmZpZy5yZXNvbHV0aW9uLGk9dGhpcy5jb25maWcucmVzb2x1dGlvbjt0aGlzLnNpemU9TWF0aC5tYXgocyxpKS8oMTAvdGhpcy5jb25maWcuc3RhclNjYWxlKTtjb25zdCBlPXRoaXMuY3R4O2UuZmlsbFN0eWxlPXRoaXMuY29uZmlnLmJhY2tncm91bmRDb2xvcixlLmZpbGxSZWN0KDAsMCxzLGkpO2Zvcihjb25zdCB0IG9mIHRoaXMuc3RhcnMpe2NvbnN0IG89dC54L3QueixuPXQueS90Lno7aWYoIXRoaXMuY29uZmlnLndhcnBFZmZlY3QmJihvPC0uNXx8bz4uNXx8bjwtLjV8fG4+LjUpKWNvbnRpbnVlO2NvbnN0IGE9dC5zaXplKnRoaXMuc2l6ZS90Lno7aWYoIShhPC4zKSl7aWYodGhpcy5jb25maWcuZGVwdGhBbHBoYSl7Y29uc3Qgcz0oMWUzLXQueikvMWUzO2UuZmlsbFN0eWxlPWByZ2JhKCR7dGhpcy5zdGFyUn0sICR7dGhpcy5zdGFyR30sICR7dGhpcy5zdGFyQn0sICR7cy50b1N0cmluZygpfSlgfWVsc2UgZS5maWxsU3R5bGU9dGhpcy5jb25maWcuc3RhckNvbG9yO2lmKHRoaXMuY29uZmlnLndhcnBFZmZlY3Qpe2UuYmVnaW5QYXRoKCk7Y29uc3Qgcj10LngvKHQueit0aGlzLmNvbmZpZy53YXJwRWZmZWN0TGVuZ3RoKnRoaXMuY29uZmlnLnNwZWVkKSxjPXQueS8odC56K3RoaXMuY29uZmlnLndhcnBFZmZlY3RMZW5ndGgqdGhpcy5jb25maWcuc3BlZWQpO2lmKHI8LS41fHxyPi41fHxjPC0uNXx8Yz4uNSljb250aW51ZTtlLm1vdmVUbyhzKihvKy41KS1hLzIsaSoobisuNSktYS8yKSxlLmxpbmVUbyhzKihyKy41KS1hLzIsaSooYysuNSktYS8yKSxlLmxpbmVXaWR0aD1NYXRoLm1pbihhLHRoaXMubWF4TGluZVdpZHRoKSxlLmxpbmVDYXA9dGhpcy5jb25maWcudXNlQ2lyY2xlcz8icm91bmQiOiJidXR0IixlLnN0cm9rZVN0eWxlPWUuZmlsbFN0eWxlLGUuc3Ryb2tlKCl9ZWxzZSB0aGlzLmNvbmZpZy51c2VDaXJjbGVzPyhlLmJlZ2luUGF0aCgpLGUuYXJjKHMqKG8rLjUpLWEvMixpKihuKy41KS1hLzIsYS8yLDAsMipNYXRoLlBJKSxlLmZpbGwoKSk6ZS5maWxsUmVjdChzKihvKy41KS1hLzIsaSoobisuNSktYS8yLGEsYSl9fX1tb3ZlKHQpe2NvbnN0IHM9dGhpcy5jb25maWcuc3BlZWQqKHQvMTApO2Zvcihjb25zdCB0IG9mIHRoaXMuc3RhcnMpZm9yKHQuei09czt0Lno8MTspdC56Kz0xZTMsdC54PShNYXRoLnJhbmRvbSgpLS41KSp0LnosdC55PShNYXRoLnJhbmRvbSgpLS41KSp0Lnp9fWxldCBlLG8sbjtjb25zdCBhPXQ9PntufHwoZS5kcmF3KG51bGw9PT1vPzE6dC1vKSxvPXQscmVxdWVzdEFuaW1hdGlvbkZyYW1lKGEpKX07b25tZXNzYWdlPSh7ZGF0YTp7Y2FudmFzOnQsY29uZmlnOnMscGF1c2U6cn19KT0+e3ZvaWQgMCE9PXQmJihlPW5ldyBpKHQpKSx2b2lkIDAhPT1zJiZlLnVwZGF0ZShzKSx2b2lkIDAhPT1yJiYobj1yLG58fChvPW51bGwscmVxdWVzdEFuaW1hdGlvbkZyYW1lKGEpKSl9fSgpOwoK",F="data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid29ya2VyLmpzIiwic291cmNlcyI6WyJ3b3JrZXI6L0M6XFx3ZWItd29ya2VyXFx3YXJwc3BlZWQuanMiLCJ3b3JrZXI6L0M6XFx3ZWItd29ya2VyXFx3b3JrZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgcmFuZFBvcyA9ICgpID0+IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDEwMDBcbmNvbnN0IGhleDJyZ2IgPSB3ZWJDb2xvciA9PlxuICB3ZWJDb2xvci5jaGFyQXQoMCkgPT09IFwiI1wiICYmIHdlYkNvbG9yLmxlbmd0aCA9PT0gN1xuICAgID8ge1xuICAgICAgICByOiBwYXJzZUludCh3ZWJDb2xvci5zdWJzdHIoMSwgMiksIDE2KSxcbiAgICAgICAgZzogcGFyc2VJbnQod2ViQ29sb3Iuc3Vic3RyKDMsIDIpLCAxNiksXG4gICAgICAgIGI6IHBhcnNlSW50KHdlYkNvbG9yLnN1YnN0cig1LCAyKSwgMTYpLFxuICAgICAgfVxuICAgIDoge1xuICAgICAgICByOiAyNTUsXG4gICAgICAgIGc6IDI1NSxcbiAgICAgICAgYjogMjU1LFxuICAgICAgfVxuXG5jbGFzcyBTdGFyIHtcbiAgY29uc3RydWN0b3IoeCwgeSwgeikge1xuICAgIHRoaXMueCA9IHhcbiAgICB0aGlzLnkgPSB5XG4gICAgdGhpcy56ID0gelxuICAgIHRoaXMuc2l6ZSA9IDAuNSArIE1hdGgucmFuZG9tKClcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXYXJwU3BlZWQge1xuICBjb25maWcgPSB7fVxuICBzdGFycyA9IFtdXG5cbiAgY29uc3RydWN0b3IoY2FudmFzKSB7XG4gICAgdGhpcy5jYW52YXMgPSBjYW52YXNcbiAgICB0aGlzLmN0eCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoXCIyZFwiKVxuICB9XG5cbiAgdXBkYXRlKGNvbmZpZykge1xuICAgIC8vTGlsaUNvZGU6IG4gdnZ2dnZ2dnZ2dnZ2dnZ2dnZ2aiBuIG4gbiBuXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoY29uZmlnKSkge1xuICAgICAgaWYgKHRoaXMuY29uZmlnW2tleV0gIT09IHZhbHVlKSB7XG4gICAgICAgIHN3aXRjaCAoa2V5KSB7XG4gICAgICAgICAgY2FzZSBcInJlc29sdXRpb25cIjpcbiAgICAgICAgICAgIGlmIChjb25maWcuc3RhclNjYWxlIHx8IHRoaXMuY29uZmlnLnN0YXJTY2FsZSkge1xuICAgICAgICAgICAgICB0aGlzLnNpemUgPSB2YWx1ZSAvICgxMCAvIChjb25maWcuc3RhclNjYWxlIHx8IHRoaXMuY29uZmlnLnN0YXJTY2FsZSkpXG4gICAgICAgICAgICAgIHRoaXMubWF4TGluZVdpZHRoID0gdGhpcy5zaXplIC8gMzBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSBcInN0YXJTY2FsZVwiOlxuICAgICAgICAgICAgaWYgKGNvbmZpZy5yZXNvbHV0aW9uIHx8IHRoaXMuY29uZmlnLnJlc29sdXRpb24pIHtcbiAgICAgICAgICAgICAgdGhpcy5zaXplID0gKGNvbmZpZy5yZXNvbHV0aW9uIHx8IHRoaXMuY29uZmlnLnJlc29sdXRpb24pIC8gKDEwIC8gdmFsdWUpXG4gICAgICAgICAgICAgIHRoaXMubWF4TGluZVdpZHRoID0gdGhpcy5zaXplIC8gMzBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSBcImRlbnNpdHlcIjpcbiAgICAgICAgICAgIGNvbnN0IHN0YXJDb3VudCA9IE1hdGguY2VpbCh2YWx1ZSAqIDEwMDApXG4gICAgICAgICAgICBjb25zdCBkaWZmID0gc3RhckNvdW50IC0gdGhpcy5zdGFycy5sZW5ndGhcbiAgICAgICAgICAgIGlmIChkaWZmID4gMCkge1xuICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRpZmY7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXIgPSBuZXcgU3RhcihyYW5kUG9zKCksIHJhbmRQb3MoKSwgMTAwMCAqIE1hdGgucmFuZG9tKCkpXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFycy5wdXNoKHN0YXIpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMuc3RhcnMubGVuZ3RoID0gc3RhckNvdW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgXCJzdGFyQ29sb3JcIjpcbiAgICAgICAgICAgIGNvbnN0IGNvbG9yID0gaGV4MnJnYih2YWx1ZSlcbiAgICAgICAgICAgIHRoaXMuc3RhclIgPSBjb2xvci5yXG4gICAgICAgICAgICB0aGlzLnN0YXJHID0gY29sb3IuZ1xuICAgICAgICAgICAgdGhpcy5zdGFyQiA9IGNvbG9yLmJcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb25maWdba2V5XSA9IHZhbHVlXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZHJhdyh0aW1lRGVsdGEpIHtcbiAgICB0aGlzLm1vdmUodGltZURlbHRhKVxuXG4gICAgY29uc3Qgd2lkdGggPSB0aGlzLmNvbmZpZy5yZXNvbHV0aW9uXG4gICAgY29uc3QgaGVpZ2h0ID0gdGhpcy5jb25maWcucmVzb2x1dGlvblxuICAgIHRoaXMuc2l6ZSA9IE1hdGgubWF4KHdpZHRoLCBoZWlnaHQpIC8gKDEwIC8gdGhpcy5jb25maWcuc3RhclNjYWxlKVxuXG4gICAgY29uc3QgY3R4ID0gdGhpcy5jdHhcbiAgICBjdHguZmlsbFN0eWxlID0gdGhpcy5jb25maWcuYmFja2dyb3VuZENvbG9yXG4gICAgY3R4LmZpbGxSZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpXG5cbiAgICBmb3IgKGNvbnN0IHN0YXIgb2YgdGhpcy5zdGFycykge1xuICAgICAgY29uc3QgeE9uRGlzcGxheSA9IHN0YXIueCAvIHN0YXIuelxuICAgICAgY29uc3QgeU9uRGlzcGxheSA9IHN0YXIueSAvIHN0YXIuelxuXG4gICAgICBpZiAoIXRoaXMuY29uZmlnLndhcnBFZmZlY3QgJiYgKHhPbkRpc3BsYXkgPCAtMC41IHx8IHhPbkRpc3BsYXkgPiAwLjUgfHwgeU9uRGlzcGxheSA8IC0wLjUgfHwgeU9uRGlzcGxheSA+IDAuNSkpXG4gICAgICAgIGNvbnRpbnVlXG5cbiAgICAgIGNvbnN0IHNpemUgPSAoc3Rhci5zaXplICogdGhpcy5zaXplKSAvIHN0YXIuelxuICAgICAgaWYgKHNpemUgPCAwLjMpIGNvbnRpbnVlIC8vZG9uJ3QgZHJhdyB2ZXJ5IHNtYWxsIGRvdHNcblxuICAgICAgaWYgKHRoaXMuY29uZmlnLmRlcHRoQWxwaGEpIHtcbiAgICAgICAgY29uc3QgYWxwaGEgPSAoMTAwMCAtIHN0YXIueikgLyAxMDAwXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBgcmdiYSgke3RoaXMuc3RhclJ9LCAke3RoaXMuc3Rhckd9LCAke3RoaXMuc3RhckJ9LCAke2FscGhhLnRvU3RyaW5nKCl9KWBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSB0aGlzLmNvbmZpZy5zdGFyQ29sb3JcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuY29uZmlnLndhcnBFZmZlY3QpIHtcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpXG4gICAgICAgIGNvbnN0IHgyT25EaXNwbGF5ID0gc3Rhci54IC8gKHN0YXIueiArIHRoaXMuY29uZmlnLndhcnBFZmZlY3RMZW5ndGggKiB0aGlzLmNvbmZpZy5zcGVlZClcbiAgICAgICAgY29uc3QgeTJPbkRpc3BsYXkgPSBzdGFyLnkgLyAoc3Rhci56ICsgdGhpcy5jb25maWcud2FycEVmZmVjdExlbmd0aCAqIHRoaXMuY29uZmlnLnNwZWVkKVxuXG4gICAgICAgIGlmICh4Mk9uRGlzcGxheSA8IC0wLjUgfHwgeDJPbkRpc3BsYXkgPiAwLjUgfHwgeTJPbkRpc3BsYXkgPCAtMC41IHx8IHkyT25EaXNwbGF5ID4gMC41KSBjb250aW51ZVxuXG4gICAgICAgIGN0eC5tb3ZlVG8od2lkdGggKiAoeE9uRGlzcGxheSArIDAuNSkgLSBzaXplIC8gMiwgaGVpZ2h0ICogKHlPbkRpc3BsYXkgKyAwLjUpIC0gc2l6ZSAvIDIpXG4gICAgICAgIGN0eC5saW5lVG8od2lkdGggKiAoeDJPbkRpc3BsYXkgKyAwLjUpIC0gc2l6ZSAvIDIsIGhlaWdodCAqICh5Mk9uRGlzcGxheSArIDAuNSkgLSBzaXplIC8gMilcbiAgICAgICAgY3R4LmxpbmVXaWR0aCA9IE1hdGgubWluKHNpemUsIHRoaXMubWF4TGluZVdpZHRoKVxuICAgICAgICBjdHgubGluZUNhcCA9IHRoaXMuY29uZmlnLnVzZUNpcmNsZXMgPyBcInJvdW5kXCIgOiBcImJ1dHRcIlxuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBjdHguZmlsbFN0eWxlXG4gICAgICAgIGN0eC5zdHJva2UoKVxuICAgICAgfSBlbHNlIGlmICh0aGlzLmNvbmZpZy51c2VDaXJjbGVzKSB7XG4gICAgICAgIGN0eC5iZWdpblBhdGgoKVxuICAgICAgICBjdHguYXJjKHdpZHRoICogKHhPbkRpc3BsYXkgKyAwLjUpIC0gc2l6ZSAvIDIsIGhlaWdodCAqICh5T25EaXNwbGF5ICsgMC41KSAtIHNpemUgLyAyLCBzaXplIC8gMiwgMCwgMiAqIE1hdGguUEkpXG4gICAgICAgIGN0eC5maWxsKClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN0eC5maWxsUmVjdCh3aWR0aCAqICh4T25EaXNwbGF5ICsgMC41KSAtIHNpemUgLyAyLCBoZWlnaHQgKiAoeU9uRGlzcGxheSArIDAuNSkgLSBzaXplIC8gMiwgc2l6ZSwgc2l6ZSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBtb3ZlKHRpbWVEZWx0YSkge1xuICAgIGNvbnN0IHNwZWVkID0gdGhpcy5jb25maWcuc3BlZWQgKiAodGltZURlbHRhIC8gMTApXG5cbiAgICBmb3IgKGNvbnN0IHN0YXIgb2YgdGhpcy5zdGFycykge1xuICAgICAgc3Rhci56IC09IHNwZWVkXG4gICAgICB3aGlsZSAoc3Rhci56IDwgMSkge1xuICAgICAgICBzdGFyLnogKz0gMTAwMFxuICAgICAgICBzdGFyLnggPSAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiBzdGFyLnpcbiAgICAgICAgc3Rhci55ID0gKE1hdGgucmFuZG9tKCkgLSAwLjUpICogc3Rhci56XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgV2FycFNwZWVkIGZyb20gXCIuL3dhcnBzcGVlZFwiXG5cbmxldCB3YXJwc3BlZWRcbmxldCBsYXN0VGltZVxubGV0IHBhdXNlZFxuXG5jb25zdCB0aWNrID0gdGltZSA9PiB7XG4gIGlmIChwYXVzZWQpIHJldHVyblxuICB3YXJwc3BlZWQuZHJhdyhsYXN0VGltZSA9PT0gbnVsbCA/IDEgOiB0aW1lIC0gbGFzdFRpbWUpXG4gIGxhc3RUaW1lID0gdGltZVxuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGljaylcbn1cblxub25tZXNzYWdlID0gKHsgZGF0YTogeyBjYW52YXMsIGNvbmZpZywgcGF1c2UgfSB9KSA9PiB7XG4gIGlmIChjYW52YXMgIT09IHVuZGVmaW5lZCkge1xuICAgIHdhcnBzcGVlZCA9IG5ldyBXYXJwU3BlZWQoY2FudmFzKVxuICB9XG5cbiAgaWYgKGNvbmZpZyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgd2FycHNwZWVkLnVwZGF0ZShjb25maWcpXG4gIH1cblxuICBpZiAocGF1c2UgIT09IHVuZGVmaW5lZCkge1xuICAgIHBhdXNlZCA9IHBhdXNlXG4gICAgaWYgKCFwYXVzZWQpIHtcbiAgICAgIGxhc3RUaW1lID0gbnVsbFxuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRpY2spXG4gICAgfVxuICB9XG59XG4iXSwibmFtZXMiOlsicmFuZFBvcyIsIk1hdGgiLCJyYW5kb20iLCJTdGFyIiwiW29iamVjdCBPYmplY3RdIiwieCIsInkiLCJ6IiwidGhpcyIsInNpemUiLCJXYXJwU3BlZWQiLCJjYW52YXMiLCJjdHgiLCJnZXRDb250ZXh0IiwiY29uZmlnIiwia2V5IiwidmFsdWUiLCJPYmplY3QiLCJlbnRyaWVzIiwic3RhclNjYWxlIiwibWF4TGluZVdpZHRoIiwicmVzb2x1dGlvbiIsInN0YXJDb3VudCIsImNlaWwiLCJkaWZmIiwic3RhcnMiLCJsZW5ndGgiLCJpIiwic3RhciIsInB1c2giLCJjb2xvciIsIndlYkNvbG9yIiwiY2hhckF0IiwiciIsInBhcnNlSW50Iiwic3Vic3RyIiwiZyIsImIiLCJzdGFyUiIsInN0YXJHIiwic3RhckIiLCJ0aW1lRGVsdGEiLCJtb3ZlIiwid2lkdGgiLCJoZWlnaHQiLCJtYXgiLCJmaWxsU3R5bGUiLCJiYWNrZ3JvdW5kQ29sb3IiLCJmaWxsUmVjdCIsInhPbkRpc3BsYXkiLCJ5T25EaXNwbGF5Iiwid2FycEVmZmVjdCIsImRlcHRoQWxwaGEiLCJhbHBoYSIsInRvU3RyaW5nIiwic3RhckNvbG9yIiwiYmVnaW5QYXRoIiwieDJPbkRpc3BsYXkiLCJ3YXJwRWZmZWN0TGVuZ3RoIiwic3BlZWQiLCJ5Mk9uRGlzcGxheSIsIm1vdmVUbyIsImxpbmVUbyIsImxpbmVXaWR0aCIsIm1pbiIsImxpbmVDYXAiLCJ1c2VDaXJjbGVzIiwic3Ryb2tlU3R5bGUiLCJzdHJva2UiLCJhcmMiLCJQSSIsImZpbGwiLCJ3YXJwc3BlZWQiLCJsYXN0VGltZSIsInBhdXNlZCIsInRpY2siLCJ0aW1lIiwiZHJhdyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm9ubWVzc2FnZSIsImRhdGEiLCJwYXVzZSIsInVuZGVmaW5lZCIsInVwZGF0ZSJdLCJtYXBwaW5ncyI6InlCQUFBLE1BQU1BLEVBQVUsSUFBOEIsS0FBdkJDLEtBQUtDLFNBQVcsSUFjdkMsTUFBTUMsRUFDSkMsWUFBWUMsRUFBR0MsRUFBR0MsR0FDaEJDLEtBQUtILEVBQUlBLEVBQ1RHLEtBQUtGLEVBQUlBLEVBQ1RFLEtBQUtELEVBQUlBLEVBQ1RDLEtBQUtDLEtBQU8sR0FBTVIsS0FBS0MsVUFJWixNQUFNUSxFQUNuQk4sT0FBUyxHQUNUQSxNQUFRLEdBRVJBLFlBQVlPLEdBQ1ZILEtBQUtHLE9BQVNBLEVBQ2RI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",Q=!1,function(I){return c=c||U(C,F,Q),new Worker(c,I)});AFRAME.registerComponent("warpspeed",{schema:{resolution:{type:"number",default:512},speed:{type:"number",default:.7},density:{type:"number",default:.7},useCircles:{type:"boolean",default:!0},depthAlpha:{type:"boolean",default:!0},warpEffect:{type:"boolean",default:!0},warpEffectLength:{type:"number",default:5},starScale:{type:"number",default:3},backgroundColor:{type:"color",default:"#100a1a"},starColor:{type:"color",default:"#ffffff"},useWorker:{type:"boolean",default:!1}},update(I){if(I.useWorker!==this.data.useWorker)if(void 0!==I.useWorker&&(I.useWorker?(this.worker.terminate(),delete this.worker):delete this.warpspeed,this.canvasMap.dispose(),delete this.canvas),this.canvas=document.createElement("canvas"),this.canvas.width=this.data.resolution,this.canvas.height=this.data.resolution,this.canvasMap=new THREE.Texture(this.canvas),this.el.getObject3D("mesh").material.map=this.canvasMap,this.data.useWorker){const I=this.canvas.transferControlToOffscreen();this.worker=new B,this.worker.postMessage({canvas:I},[I])}else this.warpspeed=new s(this.canvas);this.data.useWorker?this.worker.postMessage({config:this.data,pause:!this.isPlaying}):this.warpspeed.update(this.data)},play(){this.data.useWorker&&this.worker.postMessage({pause:!1})},pause(){this.data.useWorker&&this.worker.postMessage({pause:!0})},tick(I,g){this.data.useWorker||this.warpspeed.draw(g),this.canvasMap.needsUpdate=!0}});
