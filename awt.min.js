const I=()=>1e3*(Math.random()-.5);class g{constructor(I,g,U){this.x=I,this.y=g,this.z=U,this.size=.5+Math.random()}}class U{config={};stars=[];constructor(I){this.ctx=I.getContext("2d")}update(U){let s=!1;for(const[C,Q]of Object.entries(U))if(this.config[C]!==Q){switch(C){case"width":case"height":case"starScale":s=!0;break;case"density":const U=Math.ceil(1e3*Q),C=U-this.stars.length;if(C>0)for(let U=0;U<C;U++){const U=new g(I(),I(),1e3*Math.random());this.stars.push(U)}else this.stars.length=U;break;case"starColor":const c="#"===(F=Q).charAt(0)&&7===F.length?{r:parseInt(F.substr(1,2),16),g:parseInt(F.substr(3,2),16),b:parseInt(F.substr(5,2),16)}:{r:255,g:255,b:255};this.starR=c.r,this.starG=c.g,this.starB=c.b}this.config[C]=Q}var F;s&&(this.size=Math.max(this.config.width,this.config.height)/(10/this.config.starScale),this.maxLineWidth=this.size/30)}draw(I){this.move(I);const g=this.config.width,U=this.config.height;this.size=Math.max(g,U)/(10/this.config.starScale);const s=this.ctx;s.fillStyle=this.config.backgroundColor,s.fillRect(0,0,g,U);for(const I of this.stars){const F=I.x/I.z,C=I.y/I.z;if(!this.config.warpEffect&&(F<-.5||F>.5||C<-.5||C>.5))continue;const Q=I.size*this.size/I.z;if(!(Q<.3)){if(this.config.depthAlpha){const g=(1e3-I.z)/1e3;s.fillStyle=`rgba(${this.starR}, ${this.starG}, ${this.starB}, ${g.toString()})`}else s.fillStyle=this.config.starColor;if(this.config.warpEffect){s.beginPath();const c=I.x/(I.z+this.config.warpEffectLength*this.config.speed),B=I.y/(I.z+this.config.warpEffectLength*this.config.speed);if(c<-.5||c>.5||B<-.5||B>.5)continue;s.moveTo(g*(F+.5)-Q/2,U*(C+.5)-Q/2),s.lineTo(g*(c+.5)-Q/2,U*(B+.5)-Q/2),s.lineWidth=Math.min(Q,this.maxLineWidth),s.lineCap=this.config.useCircles?"round":"butt",s.strokeStyle=s.fillStyle,s.stroke()}else this.config.useCircles?(s.beginPath(),s.arc(g*(F+.5)-Q/2,U*(C+.5)-Q/2,Q/2,0,2*Math.PI),s.fill()):s.fillRect(g*(F+.5)-Q/2,U*(C+.5)-Q/2,Q,Q)}}}move(I){const g=this.config.speed*(I/10);for(const I of this.stars)for(I.z-=g;I.z<1;)I.z+=1e3,I.x=(Math.random()-.5)*I.z,I.y=(Math.random()-.5)*I.z}}function s(I,g,U){var s=void 0===g?null:g,F=function(I,g){var U=atob(I);if(g){for(var s=new Uint8Array(U.length),F=0,C=U.length;F<C;++F)s[F]=U.charCodeAt(F);return String.fromCharCode.apply(null,new Uint16Array(s.buffer))}return U}(I,void 0!==U&&U),C=F.indexOf("\n",10)+1,Q=F.substring(C)+(s?"//# sourceMappingURL="+s:""),c=new Blob([Q],{type:"application/javascript"});return URL.createObjectURL(c)}var F,C,Q,c,B=(F="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Y29uc3QgdD0oKT0+MWUzKihNYXRoLnJhbmRvbSgpLS41KTtjbGFzcyBze2NvbnN0cnVjdG9yKHQscyxpKXt0aGlzLng9dCx0aGlzLnk9cyx0aGlzLno9aSx0aGlzLnNpemU9LjUrTWF0aC5yYW5kb20oKX19Y2xhc3MgaXtjb25maWc9e307c3RhcnM9W107Y29uc3RydWN0b3IodCl7dGhpcy5jdHg9dC5nZXRDb250ZXh0KCIyZCIpfXVwZGF0ZShpKXtsZXQgZT0hMTtmb3IoY29uc3RbbyxhXW9mIE9iamVjdC5lbnRyaWVzKGkpKWlmKHRoaXMuY29uZmlnW29dIT09YSl7c3dpdGNoKG8pe2Nhc2Uid2lkdGgiOmNhc2UiaGVpZ2h0IjpjYXNlInN0YXJTY2FsZSI6ZT0hMDticmVhaztjYXNlImRlbnNpdHkiOmNvbnN0IGk9TWF0aC5jZWlsKDFlMyphKSxvPWktdGhpcy5zdGFycy5sZW5ndGg7aWYobz4wKWZvcihsZXQgaT0wO2k8bztpKyspe2NvbnN0IGk9bmV3IHModCgpLHQoKSwxZTMqTWF0aC5yYW5kb20oKSk7dGhpcy5zdGFycy5wdXNoKGkpfWVsc2UgdGhpcy5zdGFycy5sZW5ndGg9aTticmVhaztjYXNlInN0YXJDb2xvciI6Y29uc3QgaD0iIyI9PT0obj1hKS5jaGFyQXQoMCkmJjc9PT1uLmxlbmd0aD97cjpwYXJzZUludChuLnN1YnN0cigxLDIpLDE2KSxnOnBhcnNlSW50KG4uc3Vic3RyKDMsMiksMTYpLGI6cGFyc2VJbnQobi5zdWJzdHIoNSwyKSwxNil9OntyOjI1NSxnOjI1NSxiOjI1NX07dGhpcy5zdGFyUj1oLnIsdGhpcy5zdGFyRz1oLmcsdGhpcy5zdGFyQj1oLmJ9dGhpcy5jb25maWdbb109YX12YXIgbjtlJiYodGhpcy5zaXplPU1hdGgubWF4KHRoaXMuY29uZmlnLndpZHRoLHRoaXMuY29uZmlnLmhlaWdodCkvKDEwL3RoaXMuY29uZmlnLnN0YXJTY2FsZSksdGhpcy5tYXhMaW5lV2lkdGg9dGhpcy5zaXplLzMwKX1kcmF3KHQpe3RoaXMubW92ZSh0KTtjb25zdCBzPXRoaXMuY29uZmlnLndpZHRoLGk9dGhpcy5jb25maWcuaGVpZ2h0O3RoaXMuc2l6ZT1NYXRoLm1heChzLGkpLygxMC90aGlzLmNvbmZpZy5zdGFyU2NhbGUpO2NvbnN0IGU9dGhpcy5jdHg7ZS5maWxsU3R5bGU9dGhpcy5jb25maWcuYmFja2dyb3VuZENvbG9yLGUuZmlsbFJlY3QoMCwwLHMsaSk7Zm9yKGNvbnN0IHQgb2YgdGhpcy5zdGFycyl7Y29uc3Qgbj10LngvdC56LG89dC55L3QuejtpZighdGhpcy5jb25maWcud2FycEVmZmVjdCYmKG48LS41fHxuPi41fHxvPC0uNXx8bz4uNSkpY29udGludWU7Y29uc3QgYT10LnNpemUqdGhpcy5zaXplL3QuejtpZighKGE8LjMpKXtpZih0aGlzLmNvbmZpZy5kZXB0aEFscGhhKXtjb25zdCBzPSgxZTMtdC56KS8xZTM7ZS5maWxsU3R5bGU9YHJnYmEoJHt0aGlzLnN0YXJSfSwgJHt0aGlzLnN0YXJHfSwgJHt0aGlzLnN0YXJCfSwgJHtzLnRvU3RyaW5nKCl9KWB9ZWxzZSBlLmZpbGxTdHlsZT10aGlzLmNvbmZpZy5zdGFyQ29sb3I7aWYodGhpcy5jb25maWcud2FycEVmZmVjdCl7ZS5iZWdpblBhdGgoKTtjb25zdCBoPXQueC8odC56K3RoaXMuY29uZmlnLndhcnBFZmZlY3RMZW5ndGgqdGhpcy5jb25maWcuc3BlZWQpLGM9dC55Lyh0LnordGhpcy5jb25maWcud2FycEVmZmVjdExlbmd0aCp0aGlzLmNvbmZpZy5zcGVlZCk7aWYoaDwtLjV8fGg+LjV8fGM8LS41fHxjPi41KWNvbnRpbnVlO2UubW92ZVRvKHMqKG4rLjUpLWEvMixpKihvKy41KS1hLzIpLGUubGluZVRvKHMqKGgrLjUpLWEvMixpKihjKy41KS1hLzIpLGUubGluZVdpZHRoPU1hdGgubWluKGEsdGhpcy5tYXhMaW5lV2lkdGgpLGUubGluZUNhcD10aGlzLmNvbmZpZy51c2VDaXJjbGVzPyJyb3VuZCI6ImJ1dHQiLGUuc3Ryb2tlU3R5bGU9ZS5maWxsU3R5bGUsZS5zdHJva2UoKX1lbHNlIHRoaXMuY29uZmlnLnVzZUNpcmNsZXM/KGUuYmVnaW5QYXRoKCksZS5hcmMocyoobisuNSktYS8yLGkqKG8rLjUpLWEvMixhLzIsMCwyKk1hdGguUEkpLGUuZmlsbCgpKTplLmZpbGxSZWN0KHMqKG4rLjUpLWEvMixpKihvKy41KS1hLzIsYSxhKX19fW1vdmUodCl7Y29uc3Qgcz10aGlzLmNvbmZpZy5zcGVlZCoodC8xMCk7Zm9yKGNvbnN0IHQgb2YgdGhpcy5zdGFycylmb3IodC56LT1zO3QuejwxOyl0LnorPTFlMyx0Lng9KE1hdGgucmFuZG9tKCktLjUpKnQueix0Lnk9KE1hdGgucmFuZG9tKCktLjUpKnQuen19bGV0IGUsbixvO2NvbnN0IGE9dD0+e298fChlLmRyYXcobnVsbD09PW4/MTp0LW4pLG49dCxyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYSkpfTtvbm1lc3NhZ2U9KHtkYXRhOntjYW52YXM6dCxjb25maWc6cyxwYXVzZTpofX0pPT57dm9pZCAwIT09dCYmKGU9bmV3IGkodCkpLHZvaWQgMCE9PXMmJmUudXBkYXRlKHMpLHZvaWQgMCE9PWgmJihvPWgsb3x8KG49bnVsbCxyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYSkpKX19KCk7Cgo=",C="data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid29ya2VyLmpzIiwic291cmNlcyI6WyJ3b3JrZXI6L0M6XFx3ZWItd29ya2VyXFx3YXJwc3BlZWQuanMiLCJ3b3JrZXI6L0M6XFx3ZWItd29ya2VyXFx3b3JrZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgcmFuZFBvcyA9ICgpID0+IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDEwMDBcbmNvbnN0IGhleDJyZ2IgPSB3ZWJDb2xvciA9PlxuICB3ZWJDb2xvci5jaGFyQXQoMCkgPT09IFwiI1wiICYmIHdlYkNvbG9yLmxlbmd0aCA9PT0gN1xuICAgID8ge1xuICAgICAgICByOiBwYXJzZUludCh3ZWJDb2xvci5zdWJzdHIoMSwgMiksIDE2KSxcbiAgICAgICAgZzogcGFyc2VJbnQod2ViQ29sb3Iuc3Vic3RyKDMsIDIpLCAxNiksXG4gICAgICAgIGI6IHBhcnNlSW50KHdlYkNvbG9yLnN1YnN0cig1LCAyKSwgMTYpLFxuICAgICAgfVxuICAgIDoge1xuICAgICAgICByOiAyNTUsXG4gICAgICAgIGc6IDI1NSxcbiAgICAgICAgYjogMjU1LFxuICAgICAgfVxuXG5jbGFzcyBTdGFyIHtcbiAgY29uc3RydWN0b3IoeCwgeSwgeikge1xuICAgIHRoaXMueCA9IHhcbiAgICB0aGlzLnkgPSB5XG4gICAgdGhpcy56ID0gelxuICAgIHRoaXMuc2l6ZSA9IDAuNSArIE1hdGgucmFuZG9tKClcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXYXJwU3BlZWQge1xuICBjb25maWcgPSB7fVxuICBzdGFycyA9IFtdXG5cbiAgY29uc3RydWN0b3IoY2FudmFzKSB7XG4gICAgdGhpcy5jdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpXG4gIH1cblxuICB1cGRhdGUoY29uZmlnKSB7XG4gICAgLy9MaWxpQ29kZTogbiB2dnZ2dnZ2dnZ2dnZ2dnZ2dnZqIG4gbiBuIG5cbiAgICBsZXQgcmVzb2x1dGlvblVwZGF0ZWQgPSBmYWxzZVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGNvbmZpZykpIHtcbiAgICAgIGlmICh0aGlzLmNvbmZpZ1trZXldICE9PSB2YWx1ZSkge1xuICAgICAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgICAgIGNhc2UgXCJ3aWR0aFwiOlxuICAgICAgICAgIGNhc2UgXCJoZWlnaHRcIjpcbiAgICAgICAgICBjYXNlIFwic3RhclNjYWxlXCI6XG4gICAgICAgICAgICByZXNvbHV0aW9uVXBkYXRlZCA9IHRydWVcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSBcImRlbnNpdHlcIjpcbiAgICAgICAgICAgIGNvbnN0IHN0YXJDb3VudCA9IE1hdGguY2VpbCh2YWx1ZSAqIDEwMDApXG4gICAgICAgICAgICBjb25zdCBkaWZmID0gc3RhckNvdW50IC0gdGhpcy5zdGFycy5sZW5ndGhcbiAgICAgICAgICAgIGlmIChkaWZmID4gMCkge1xuICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRpZmY7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXIgPSBuZXcgU3RhcihyYW5kUG9zKCksIHJhbmRQb3MoKSwgMTAwMCAqIE1hdGgucmFuZG9tKCkpXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFycy5wdXNoKHN0YXIpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMuc3RhcnMubGVuZ3RoID0gc3RhckNvdW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgXCJzdGFyQ29sb3JcIjpcbiAgICAgICAgICAgIGNvbnN0IGNvbG9yID0gaGV4MnJnYih2YWx1ZSlcbiAgICAgICAgICAgIHRoaXMuc3RhclIgPSBjb2xvci5yXG4gICAgICAgICAgICB0aGlzLnN0YXJHID0gY29sb3IuZ1xuICAgICAgICAgICAgdGhpcy5zdGFyQiA9IGNvbG9yLmJcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb25maWdba2V5XSA9IHZhbHVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHJlc29sdXRpb25VcGRhdGVkKSB7XG4gICAgICB0aGlzLnNpemUgPSBNYXRoLm1heCh0aGlzLmNvbmZpZy53aWR0aCwgdGhpcy5jb25maWcuaGVpZ2h0KSAvICgxMCAvIHRoaXMuY29uZmlnLnN0YXJTY2FsZSlcbiAgICAgIHRoaXMubWF4TGluZVdpZHRoID0gdGhpcy5zaXplIC8gMzBcbiAgICB9XG4gIH1cblxuICBkcmF3KHRpbWVEZWx0YSkge1xuICAgIHRoaXMubW92ZSh0aW1lRGVsdGEpXG5cbiAgICBjb25zdCB3aWR0aCA9IHRoaXMuY29uZmlnLndpZHRoXG4gICAgY29uc3QgaGVpZ2h0ID0gdGhpcy5jb25maWcuaGVpZ2h0XG4gICAgdGhpcy5zaXplID0gTWF0aC5tYXgod2lkdGgsIGhlaWdodCkgLyAoMTAgLyB0aGlzLmNvbmZpZy5zdGFyU2NhbGUpXG5cbiAgICBjb25zdCBjdHggPSB0aGlzLmN0eFxuICAgIGN0eC5maWxsU3R5bGUgPSB0aGlzLmNvbmZpZy5iYWNrZ3JvdW5kQ29sb3JcbiAgICBjdHguZmlsbFJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodClcblxuICAgIGZvciAoY29uc3Qgc3RhciBvZiB0aGlzLnN0YXJzKSB7XG4gICAgICBjb25zdCB4T25EaXNwbGF5ID0gc3Rhci54IC8gc3Rhci56XG4gICAgICBjb25zdCB5T25EaXNwbGF5ID0gc3Rhci55IC8gc3Rhci56XG5cbiAgICAgIGlmICghdGhpcy5jb25maWcud2FycEVmZmVjdCAmJiAoeE9uRGlzcGxheSA8IC0wLjUgfHwgeE9uRGlzcGxheSA+IDAuNSB8fCB5T25EaXNwbGF5IDwgLTAuNSB8fCB5T25EaXNwbGF5ID4gMC41KSlcbiAgICAgICAgY29udGludWVcblxuICAgICAgY29uc3Qgc2l6ZSA9IChzdGFyLnNpemUgKiB0aGlzLnNpemUpIC8gc3Rhci56XG4gICAgICBpZiAoc2l6ZSA8IDAuMykgY29udGludWUgLy9kb24ndCBkcmF3IHZlcnkgc21hbGwgZG90c1xuXG4gICAgICBpZiAodGhpcy5jb25maWcuZGVwdGhBbHBoYSkge1xuICAgICAgICBjb25zdCBhbHBoYSA9ICgxMDAwIC0gc3Rhci56KSAvIDEwMDBcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGByZ2JhKCR7dGhpcy5zdGFyUn0sICR7dGhpcy5zdGFyR30sICR7dGhpcy5zdGFyQn0sICR7YWxwaGEudG9TdHJpbmcoKX0pYFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHRoaXMuY29uZmlnLnN0YXJDb2xvclxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5jb25maWcud2FycEVmZmVjdCkge1xuICAgICAgICBjdHguYmVnaW5QYXRoKClcbiAgICAgICAgY29uc3QgeDJPbkRpc3BsYXkgPSBzdGFyLnggLyAoc3Rhci56ICsgdGhpcy5jb25maWcud2FycEVmZmVjdExlbmd0aCAqIHRoaXMuY29uZmlnLnNwZWVkKVxuICAgICAgICBjb25zdCB5Mk9uRGlzcGxheSA9IHN0YXIueSAvIChzdGFyLnogKyB0aGlzLmNvbmZpZy53YXJwRWZmZWN0TGVuZ3RoICogdGhpcy5jb25maWcuc3BlZWQpXG5cbiAgICAgICAgaWYgKHgyT25EaXNwbGF5IDwgLTAuNSB8fCB4Mk9uRGlzcGxheSA+IDAuNSB8fCB5Mk9uRGlzcGxheSA8IC0wLjUgfHwgeTJPbkRpc3BsYXkgPiAwLjUpIGNvbnRpbnVlXG5cbiAgICAgICAgY3R4Lm1vdmVUbyh3aWR0aCAqICh4T25EaXNwbGF5ICsgMC41KSAtIHNpemUgLyAyLCBoZWlnaHQgKiAoeU9uRGlzcGxheSArIDAuNSkgLSBzaXplIC8gMilcbiAgICAgICAgY3R4LmxpbmVUbyh3aWR0aCAqICh4Mk9uRGlzcGxheSArIDAuNSkgLSBzaXplIC8gMiwgaGVpZ2h0ICogKHkyT25EaXNwbGF5ICsgMC41KSAtIHNpemUgLyAyKVxuICAgICAgICBjdHgubGluZVdpZHRoID0gTWF0aC5taW4oc2l6ZSwgdGhpcy5tYXhMaW5lV2lkdGgpXG4gICAgICAgIGN0eC5saW5lQ2FwID0gdGhpcy5jb25maWcudXNlQ2lyY2xlcyA/IFwicm91bmRcIiA6IFwiYnV0dFwiXG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IGN0eC5maWxsU3R5bGVcbiAgICAgICAgY3R4LnN0cm9rZSgpXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuY29uZmlnLnVzZUNpcmNsZXMpIHtcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpXG4gICAgICAgIGN0eC5hcmMod2lkdGggKiAoeE9uRGlzcGxheSArIDAuNSkgLSBzaXplIC8gMiwgaGVpZ2h0ICogKHlPbkRpc3BsYXkgKyAwLjUpIC0gc2l6ZSAvIDIsIHNpemUgLyAyLCAwLCAyICogTWF0aC5QSSlcbiAgICAgICAgY3R4LmZpbGwoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3R4LmZpbGxSZWN0KHdpZHRoICogKHhPbkRpc3BsYXkgKyAwLjUpIC0gc2l6ZSAvIDIsIGhlaWdodCAqICh5T25EaXNwbGF5ICsgMC41KSAtIHNpemUgLyAyLCBzaXplLCBzaXplKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIG1vdmUodGltZURlbHRhKSB7XG4gICAgY29uc3Qgc3BlZWQgPSB0aGlzLmNvbmZpZy5zcGVlZCAqICh0aW1lRGVsdGEgLyAxMClcblxuICAgIGZvciAoY29uc3Qgc3RhciBvZiB0aGlzLnN0YXJzKSB7XG4gICAgICBzdGFyLnogLT0gc3BlZWRcbiAgICAgIHdoaWxlIChzdGFyLnogPCAxKSB7XG4gICAgICAgIHN0YXIueiArPSAxMDAwXG4gICAgICAgIHN0YXIueCA9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIHN0YXIuelxuICAgICAgICBzdGFyLnkgPSAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiBzdGFyLnpcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCBXYXJwU3BlZWQgZnJvbSBcIi4vd2FycHNwZWVkXCJcblxubGV0IHdhcnBzcGVlZFxubGV0IGxhc3RUaW1lXG5sZXQgcGF1c2VkXG5cbmNvbnN0IHRpY2sgPSB0aW1lID0+IHtcbiAgaWYgKHBhdXNlZCkgcmV0dXJuXG4gIHdhcnBzcGVlZC5kcmF3KGxhc3RUaW1lID09PSBudWxsID8gMSA6IHRpbWUgLSBsYXN0VGltZSlcbiAgbGFzdFRpbWUgPSB0aW1lXG4gIHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aWNrKVxufVxuXG5vbm1lc3NhZ2UgPSAoeyBkYXRhOiB7IGNhbnZhcywgY29uZmlnLCBwYXVzZSB9IH0pID0+IHtcbiAgaWYgKGNhbnZhcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgd2FycHNwZWVkID0gbmV3IFdhcnBTcGVlZChjYW52YXMpXG4gIH1cblxuICBpZiAoY29uZmlnICE9PSB1bmRlZmluZWQpIHtcbiAgICB3YXJwc3BlZWQudXBkYXRlKGNvbmZpZylcbiAgfVxuXG4gIGlmIChwYXVzZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcGF1c2VkID0gcGF1c2VcbiAgICBpZiAoIXBhdXNlZCkge1xuICAgICAgbGFzdFRpbWUgPSBudWxsXG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGljaylcbiAgICB9XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJyYW5kUG9zIiwiTWF0aCIsInJhbmRvbSIsIlN0YXIiLCJbb2JqZWN0IE9iamVjdF0iLCJ4IiwieSIsInoiLCJ0aGlzIiwic2l6ZSIsIldhcnBTcGVlZCIsImNhbnZhcyIsImN0eCIsImdldENvbnRleHQiLCJjb25maWciLCJyZXNvbHV0aW9uVXBkYXRlZCIsImtleSIsInZhbHVlIiwiT2JqZWN0IiwiZW50cmllcyIsInN0YXJDb3VudCIsImNlaWwiLCJkaWZmIiwic3RhcnMiLCJsZW5ndGgiLCJpIiwic3RhciIsInB1c2giLCJjb2xvciIsIndlYkNvbG9yIiwiY2hhckF0IiwiciIsInBhcnNlSW50Iiwic3Vic3RyIiwiZyIsImIiLCJzdGFyUiIsInN0YXJHIiwic3RhckIiLCJtYXgiLCJ3aWR0aCIsImhlaWdodCIsInN0YXJTY2FsZSIsIm1heExpbmVXaWR0aCIsInRpbWVEZWx0YSIsIm1vdmUiLCJmaWxsU3R5bGUiLCJiYWNrZ3JvdW5kQ29sb3IiLCJmaWxsUmVjdCIsInhPbkRpc3BsYXkiLCJ5T25EaXNwbGF5Iiwid2FycEVmZmVjdCIsImRlcHRoQWxwaGEiLCJhbHBoYSIsInRvU3RyaW5nIiwic3RhckNvbG9yIiwiYmVnaW5QYXRoIiwieDJPbkRpc3BsYXkiLCJ3YXJwRWZmZWN0TGVuZ3RoIiwic3BlZWQiLCJ5Mk9uRGlzcGxheSIsIm1vdmVUbyIsImxpbmVUbyIsImxpbmVXaWR0aCIsIm1pbiIsImxpbmVDYXAiLCJ1c2VDaXJjbGVzIiwic3Ryb2tlU3R5bGUiLCJzdHJva2UiLCJhcmMiLCJQSSIsImZpbGwiLCJ3YXJwc3BlZWQiLCJsYXN0VGltZSIsInBhdXNlZCIsInRpY2siLCJ0aW1lIiwiZHJhdyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm9ubWVzc2FnZSIsImRhdGEiLCJwYXVzZSIsInVuZGVmaW5lZCIsInVwZGF0ZSJdLCJtYXBwaW5ncyI6InlCQUFBLE1BQU1BLEVBQVUsSUFBOEIsS0FBdkJDLEtBQUtDLFNBQVcsSUFjdkMsTUFBTUMsRUFDSkMsWUFBWUMsRUFBR0MsRUFBR0MsR0FDaEJDLEtBQUtILEVBQUlBLEVBQ1RHLEtBQUtGLEVBQUlBLEVBQ1RFLEtBQUtELEVBQUlBLEVBQ1RDLEtBQUtDLEtBQU8sR0FBTVIsS0FBS0MsVUFJWixNQUFNUSxFQUNuQk4sT0FBUyxHQUNUQSxNQUFRLEdBRVJBLFlBQVlPLEdBQ1ZILEtBQUtJLElBQU1ELEVBQU9FLFdBQVcsTUFHL0JULE9BQU9VLEdBRUwsSUFBSUMsR0FBb0IsRUFDeEIsSUFBSyxNQUFPQyxFQUFLQyxLQUFVQyxPQUFPQyxRQUFRTCxHQUN4QyxHQUFJTixLQUFLTSxPQUFPRSxLQUFTQyxFQUFPLENBQzlCLE9BQVFELEdBQ04sSUFBSyxRQUNMLElBQUssU0FDTCxJQUFLLFlBQ0hELEdBQW9CLEVBQ3BCLE1BQ0YsSUFBSyxVQUNILE1BQU1LLEVBQVluQixLQUFLb0Is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",Q=!1,function(I){return c=c||s(F,C,Q),new Worker(c,I)});AFRAME.registerComponent("warpspeed",{schema:{width:{type:"number",default:512},height:{type:"number",default:512},speed:{type:"number",default:.7},density:{type:"number",default:25.7},useCircles:{type:"boolean",default:!0},depthAlpha:{type:"boolean",default:!0},warpEffect:{type:"boolean",default:!0},warpEffectLength:{type:"number",default:5},starScale:{type:"number",default:3},backgroundColor:{type:"color",default:"#100a1a"},starColor:{type:"color",default:"#ffffff"},useWorker:{type:"boolean",default:!1}},update(I){(I.useWorker!==this.data.useWorker||I.width!==this.data.width||I.height!==this.data.height)&&(void 0!==I.useWorker&&this.destroyCanvasMap(),this.createCanvasMap(),this.initWarpspeed()),this.workerInUse()?this.worker.postMessage({config:this.data,pause:!this.isPlaying}):this.warpspeed.update(this.data)},initWarpspeed(){if(this.el.removeState("worker"),this.data.useWorker)try{const I=this.canvas.transferControlToOffscreen();return this.worker=new B,this.worker.postMessage({canvas:I},[I]),void this.el.addState("worker")}catch(I){console.error(I)}this.warpspeed=new U(this.canvas)},createCanvasMap(){this.canvas=document.createElement("canvas"),this.canvas.width=this.data.width,this.canvas.height=this.data.height,this.canvasMap=new THREE.Texture(this.canvas),this.el.getObject3D("mesh").material.map=this.canvasMap},destroyCanvasMap(){this.workerInUse()?(this.worker.terminate(),delete this.worker):delete this.warpspeed,this.canvasMap.dispose(),delete this.canvas},play(){this.workerInUse()&&this.worker.postMessage({pause:!1})},pause(){this.workerInUse()&&this.worker.postMessage({pause:!0})},workerInUse(){return this.el.is("worker")},tick(I,g){this.workerInUse()||this.warpspeed.draw(g),this.canvasMap.needsUpdate=!0}});
